{"version":3,"file":"chart.js","sources":["chart.js","/source/chart.js"],"names":["global","factory","exports","module","require","define","amd","koto","Icicle","d3","this","hierarchy","keySetter","depth","d","map","mapType","array","maxLength","rollup","call","nest","sortValues","sort","keyValue","object","setter","size","values","i","n","length","key","valuesByKey","filter","get","push","set","Object","keys","forEach","entries","sortKey","sortKeys","keyMap","name","children","a","b","newMaxLength","f","order","Tooltip","_koto$Base","selection","getTopLocationsAndPath","tooltipPositionObj","containerWidth","path","translate","translateX","translateY","getPathTranslate","hittingRight","hittingLeft","offsetX","_Chart","config","topY","_topPath","_moveX","updateCaretPath","getRightPositionAndPath","containerHeight","hittingBottom","hittingTop","centerY","rightX","_rightPath","_moveY","getBottomPositionAndPath","bottomY","_bottomPath","getLeftPositionAndPath","leftX","_leftPath","calPositionAndPath","location","positionAndPath","determineInboundsTooltipLocation","closeToTop","closeToRight","closeToLeft","closeToBottom","getTooltipPositionStatus","point","rectBBox","_gBBox","offsetY","y","_baseGroupBBox","height","x","width","offsetPadding","_caretWidth","setBaseGroupBBoxDimensions","isTextRectText","appends","returnVal","node","childNodes","nodeName","formatAppendTextRectText","padding","prevWidth","groupBBox","select","attr","getBBox","element","dy","getCentralPosition","selectAll","transform","setBaseGroupBBox","cloneBBox","_baseGroup","setGBBox","undefined","_appends","elem","parseInt","style","hittingEdge1","hittingEdge2","offset","dimension","heightOrWidth","r","axis","pathString","xyString","caretX","caretY","match","replace","offsetCaretAtEdge","tooltipWidth","tooltipHeight","bboxWidth","bboxHeight","container","mouseXOffset","mouseYOffset","curvedRectOffset","farthestCaretPosition","left","right","top","bottom","generatePaths","w","h","c","box","_get","getPrototypeOf","prototype","configs","base","opacity","caretSize","stationary","maxWidth","format","tooltipBackgroundColor","value","formats","default","text","textBBox","textBlock","textElement","getBoundingClientRect","domoStrings","wrapText","textRectText","append","_parent","parentNode","_drawn","on","contains","removeChild","appendChild","_container","_containerBBox","newWidth","newHeight","baseGroup","posAndPathObj","Base","_Tooltip","_hierarchy","_koto$Base2","click","domain","dx","range","_group","transition","duration","_targetData","textLength","isRelated","thing","relative","isChild","isParent","_x2","_x3","parent","getParent","_x4","_x5","rootName","description","type","units","category","getter","console","log","newValue","item","accessor","percent","overUnder","scale","linear","color","ordinal","partition","layout","_tooltip","_tooltipValue","_tooltipRect","_tooltipLabel","trigger","icicle","layer","dataBind","data","root","target","insert","datum","_tooltipRect2","_tooltipLabel2","coordinates","mouse","_d","symbol","svg","gen","totalDuration","max","ease","delay","shouldShow","canFit","getComputedTextLength","row","level1","child","chart"],"mappings":"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","sourceRoot":"/source/","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('d3'), require('koto')) :\n\ttypeof define === 'function' && define.amd ? define(['d3', 'koto'], factory) :\n\tglobal.koto.Icicle = factory(global.d3, global.koto)\n}(this, function (d3, koto) { 'use strict';\n\n\tclass Tooltip extends koto.Base {\n\t\tconstructor(selection) {\n\t\t\tsuper(selection);\n\t\t\tvar _Chart = this;\n\n\t\t\tvar configs = {\n\t\t\t\tcontainer: this.base,\n\t\t\t\topacity: 0,\n\t\t\t\tpadding: 7,\n\t\t\t\tcaretSize: 5,\n\t\t\t\tstationary: false,\n\t\t\t\tmaxWidth: 200,\n\t\t\t\tformat: 'default',\n\t\t\t\ttooltipBackgroundColor: '#fff'\n\t\t\t};\n\n\t\t\tfor (var key in configs) {\n\t\t\t\tthis.configs.set(key, {\n\t\t\t\t\tvalue: configs[key]\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar formats = {\n\t\t\t\tdefault: function (appends) {},\n\t\t\t\ttext: function (appends) {\n\t\t\t\t\t//Automatically position if there is only one text element appended\n\t\t\t\t\tif (appends[0].length === 1 && appends.node().childNodes[0].nodeName === 'text') {\n\n\t\t\t\t\t\tvar textBBox = appends.node().childNodes[0].getBBox();\n\n\t\t\t\t\t\tappends.select('text')\n\t\t\t\t\t\t\t.attr({\n\t\t\t\t\t\t\t\tdy: function () {\n\t\t\t\t\t\t\t\t\treturn getCentralPosition(this);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ty: textBBox.height / 2\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tappends.selectAll('tspan')\n\t\t\t\t\t\t\t.attr({\n\t\t\t\t\t\t\t\tdy: function () {\n\t\t\t\t\t\t\t\t\treturn getCentralPosition(this);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ty: textBBox.height / 2\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttextBlock: function (appends) {\n\n\t\t\t\t\tvar textElement = appends.select('text');\n\t\t\t\t\tvar dy = textElement.node().getBoundingClientRect().height;\n\t\t\t\t\td3.domoStrings.wrapText(textElement, _Chart.config('maxWidth'));\n\n\t\t\t\t\tappends.select('text').attr({\n\t\t\t\t\t\ty: dy - (dy / 4)\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\ttextRectText: function (appends) {\n\t\t\t\t\t//Automatically format for text rect text pattern\n\t\t\t\t\tif (appends.node().childNodes.length % 2 !== 0) {\n\n\t\t\t\t\t\tif (isTextRectText(appends)) {\n\t\t\t\t\t\t\tformatAppendTextRectText(appends);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar r = 3; //Radius to round the rect\n\n\t\t\tthis._baseGroup = this.base.append('g')\n\t\t\t\t.attr('transform', 'translate(0, 0)')\n\t\t\t\t.style('pointer-events', 'none');\n\n\t\t\t_Chart._parent = _Chart._baseGroup.node().parentNode;\n\n\t\t\tthis._baseGroup.append('path')\n\t\t\t\t.attr('class', 'toolTipPath')\n\t\t\t\t.style('opacity', 0.9);\n\n\t\t\tthis._appends = this._baseGroup.append('g');\n\n\t\t\t_Chart._drawn = false;\n\t\t\t_Chart._moveX = undefined;\n\t\t\t_Chart._moveY = undefined;\n\n\t\t\t/**\n\t\t\t * This will hide the tooltip properly\n\t\t\t */\n\t\t\tthis.on('remove', function () {\n\t\t\t\t_Chart._drawn = false;\n\n\t\t\t\tif (d3.select('html').node().contains(_Chart._baseGroup.node())) {\n\t\t\t\t\t_Chart._parent.removeChild(_Chart._baseGroup.node());\n\t\t\t\t}\n\t\t\t});\n\n\n\n\t\t\t/**\n\t\t\t * This will re-draw the tool tip with the correct dimensions around the _appends group\n\t\t\t * @param  {number} width  override the width of the container\n\t\t\t * @param  {number} height  override the height of the container\n\t\t\t */\n\t\t\tthis.on('draw', function (width, height) {\n\t\t\t\t_Chart._parent.appendChild(_Chart._baseGroup.node());\n\n\t\t\t\t_Chart._container = _Chart.config('container');\n\t\t\t\t_Chart._caretWidth = _Chart.config('caretSize') * 2;\n\t\t\t\t_Chart._containerBBox = _Chart.config('container').node().getBoundingClientRect();\n\n\t\t\t\t//Format\n\t\t\t\t_Chart._baseGroup.select('.toolTipPath').style('fill', _Chart.config('tooltipBackgroundColor'));\n\t\t\t\t_Chart._appends.attr('transform', 'translate(' + _Chart.config('padding') + ', ' + _Chart.config('padding') + ')');\n\t\t\t\tformats[_Chart.config('format')](_Chart._appends);\n\n\t\t\t\tsetGBBox(height, width);\n\t\t\t\tsetBaseGroupBBox();\n\t\t\t\tgeneratePaths();\n\n\t\t\t\t_Chart._baseGroup\n\t\t\t\t\t.select('.toolTipPath')\n\t\t\t\t\t.attr({\n\t\t\t\t\t\t'transform': _Chart._topPath.translate,\n\t\t\t\t\t\td: _Chart._topPath.path\n\t\t\t\t\t});\n\n\t\t\t\t_Chart._drawn = true;\n\t\t\t});\n\n\n\n\t\t\t/**\n\t\t\t * This will move the tooltip wherever you will it to be\n\t\t\t * @param  {object} point     Object with an x and y\n\t\t\t * @param  {string} location  String that will overide the location of the tooltip\n\t\t\t * @param  {number} newWidth  This will override the width of the tooltip's bounds\n\t\t\t * @param  {number} newHeight This will override the height of the tooltip's bounds\n\t\t\t */\n\t\t\tthis.on('moveTo', function (point, location, newWidth, newHeight) {\n\t\t\t\tsetBaseGroupBBoxDimensions(location);\n\n\t\t\t\tif (_Chart._drawn) {\n\n\t\t\t\t\tvar containerWidth = newWidth ? newWidth : _Chart._containerBBox.width;\n\t\t\t\t\tvar containerHeight = newHeight ? newHeight : _Chart._containerBBox.height;\n\t\t\t\t\tvar baseGroup = _Chart._baseGroup;\n\t\t\t\t\tvar tooltipPositionObj = getTooltipPositionStatus(containerWidth, containerHeight, point);\n\n\t\t\t\t\tif (!location) {\n\t\t\t\t\t\tlocation = determineInboundsTooltipLocation(tooltipPositionObj);\n\t\t\t\t\t}\n\n\t\t\t\t\toffsetCaretAtEdge({\n\t\t\t\t\t\tleft: tooltipPositionObj.hittingLeft,\n\t\t\t\t\t\tright: tooltipPositionObj.hittingRight,\n\t\t\t\t\t\ttop: tooltipPositionObj.hittingTop,\n\t\t\t\t\t\tbottom: tooltipPositionObj.hittingBottom,\n\t\t\t\t\t\tcontainer: {\n\t\t\t\t\t\t\theight: containerHeight,\n\t\t\t\t\t\t\twidth: containerWidth\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpoint: point\n\t\t\t\t\t});\n\n\t\t\t\t\tvar posAndPathObj = calPositionAndPath(location, tooltipPositionObj, containerHeight, containerWidth);\n\n\t\t\t\t\tbaseGroup.attr('transform', 'translate(' + posAndPathObj.translateX + ',' + posAndPathObj.translateY + ')');\n\n\t\t\t\t\tbaseGroup\n\t\t\t\t\t\t.select('.toolTipPath')\n\t\t\t\t\t\t.attr({\n\t\t\t\t\t\t\t'transform': posAndPathObj.translate,\n\t\t\t\t\t\t\td: posAndPathObj.path\n\t\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t});\n\n\n\t\t\t/*----------------------------------------------------------------------------------\n\t    // MoveTo Helper Functions\n\t    ----------------------------------------------------------------------------------*/\n\n\t\t\t/**\n\t\t\t * getTopLocationsAndPath\n\t\t\t */\n\t\t\tfunction getTopLocationsAndPath(tooltipPositionObj, containerWidth) {\n\n\t\t\t\tvar path;\n\t\t\t\tvar translate;\n\t\t\t\tvar translateX;\n\t\t\t\tvar translateY;\n\n\t\t\t\ttranslateX = getPathTranslate(\n\t\t\t\t\ttooltipPositionObj.hittingRight,\n\t\t\t\t\ttooltipPositionObj.hittingLeft, (tooltipPositionObj.offsetX + (_Chart.config('caretSize'))),\n\t\t\t\t\t'width',\n\t\t\t\t\tcontainerWidth\n\t\t\t\t);\n\n\t\t\t\ttranslateY = tooltipPositionObj.topY;\n\t\t\t\ttranslate = _Chart._topPath.translate;\n\n\t\t\t\tif (_Chart._moveX !== 0) {\n\t\t\t\t\tpath = updateCaretPath('_topPath', 'x');\n\t\t\t\t} else {\n\t\t\t\t\tpath = _Chart._topPath.path;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\ttranslateX: translateX,\n\t\t\t\t\ttranslateY: translateY,\n\t\t\t\t\ttranslate: translate,\n\t\t\t\t\tpath: path\n\t\t\t\t};\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * getRightPositionAndPath\n\t\t\t */\n\t\t\tfunction getRightPositionAndPath(tooltipPositionObj, containerHeight) {\n\n\t\t\t\tvar path;\n\t\t\t\tvar translate;\n\t\t\t\tvar translateX;\n\t\t\t\tvar translateY;\n\n\t\t\t\ttranslateY = getPathTranslate(\n\t\t\t\t\ttooltipPositionObj.hittingBottom,\n\t\t\t\t\ttooltipPositionObj.hittingTop, (tooltipPositionObj.centerY - _Chart.config('padding')),\n\t\t\t\t\t'height',\n\t\t\t\t\tcontainerHeight\n\t\t\t\t);\n\n\t\t\t\ttranslateX = tooltipPositionObj.rightX;\n\t\t\t\ttranslate = _Chart._rightPath.translate;\n\n\t\t\t\tif (_Chart._moveY !== 0) {\n\t\t\t\t\tpath = updateCaretPath('_rightPath', 'y');\n\t\t\t\t} else {\n\t\t\t\t\tpath = _Chart._rightPath.path;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\ttranslateX: translateX,\n\t\t\t\t\ttranslateY: translateY,\n\t\t\t\t\ttranslate: translate,\n\t\t\t\t\tpath: path\n\t\t\t\t};\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * getBottomPositionAndPath\n\t\t\t */\n\t\t\tfunction getBottomPositionAndPath(tooltipPositionObj, containerWidth) {\n\n\t\t\t\tvar path;\n\t\t\t\tvar translate;\n\t\t\t\tvar translateX;\n\t\t\t\tvar translateY;\n\n\t\t\t\ttranslateX = getPathTranslate(\n\t\t\t\t\ttooltipPositionObj.hittingRight,\n\t\t\t\t\ttooltipPositionObj.hittingLeft, (tooltipPositionObj.offsetX + (_Chart.config('caretSize') / 2)),\n\t\t\t\t\t'width',\n\t\t\t\t\tcontainerWidth\n\t\t\t\t);\n\n\t\t\t\ttranslateY = (tooltipPositionObj.bottomY + _Chart.config('padding')) + 5;\n\t\t\t\ttranslate = _Chart._bottomPath.translate;\n\n\t\t\t\tif (_Chart._moveX !== 0) {\n\t\t\t\t\tpath = updateCaretPath('_bottomPath', 'x');\n\t\t\t\t} else {\n\t\t\t\t\tpath = _Chart._bottomPath.path;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\ttranslateX: translateX,\n\t\t\t\t\ttranslateY: translateY,\n\t\t\t\t\ttranslate: translate,\n\t\t\t\t\tpath: path\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * getLeftPositionAndPath\n\t\t\t */\n\t\t\tfunction getLeftPositionAndPath(tooltipPositionObj, containerHeight) {\n\t\t\t\tvar path;\n\t\t\t\tvar translate;\n\t\t\t\tvar translateX;\n\t\t\t\tvar translateY;\n\n\t\t\t\ttranslateY = getPathTranslate(\n\t\t\t\t\ttooltipPositionObj.hittingBottom,\n\t\t\t\t\ttooltipPositionObj.hittingTop, (tooltipPositionObj.centerY - _Chart.config('padding')),\n\t\t\t\t\t'height',\n\t\t\t\t\tcontainerHeight\n\t\t\t\t);\n\n\t\t\t\ttranslateX = tooltipPositionObj.leftX;\n\t\t\t\ttranslate = _Chart._leftPath.translate;\n\n\t\t\t\tif (_Chart._moveY !== 0) {\n\t\t\t\t\tpath = updateCaretPath('_leftPath', 'y');\n\t\t\t\t} else {\n\t\t\t\t\tpath = _Chart._leftPath.path;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\ttranslateX: translateX,\n\t\t\t\t\ttranslateY: translateY,\n\t\t\t\t\ttranslate: translate,\n\t\t\t\t\tpath: path\n\t\t\t\t};\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * Returns the tooltips draw position and path given the current draw location.\n\t\t\t *\n\t\t\t * @param location\n\t\t\t * @param tooltipPositionObj\n\t\t\t * @param containerHeight\n\t\t\t * @returns {{translateX: *, translateY: *, translate: *, path: *}}\n\t\t\t */\n\t\t\tfunction calPositionAndPath(location, tooltipPositionObj, containerHeight, containerWidth) {\n\n\t\t\t\tvar positionAndPath;\n\n\t\t\t\tswitch (location) {\n\t\t\t\tcase 'top':\n\t\t\t\t\t{\n\t\t\t\t\t\tpositionAndPath = getTopLocationsAndPath(tooltipPositionObj, containerWidth);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\tcase 'right':\n\t\t\t\t\t{\n\t\t\t\t\t\tpositionAndPath = getRightPositionAndPath(tooltipPositionObj, containerHeight);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\tcase 'bottom':\n\t\t\t\t\t{\n\t\t\t\t\t\tpositionAndPath = getBottomPositionAndPath(tooltipPositionObj, containerWidth);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\tcase 'left':\n\t\t\t\t\t{\n\t\t\t\t\t\tpositionAndPath = getLeftPositionAndPath(tooltipPositionObj, containerHeight);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn positionAndPath;\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * Determine the direction the tooltip should draw given its location.\n\t\t\t * @param tooltipPositionObj\n\t\t\t * @returns {string}\n\t\t\t */\n\t\t\tfunction determineInboundsTooltipLocation(tooltipPositionObj) {\n\n\t\t\t\tvar location = 'top';\n\t\t\t\tif ((tooltipPositionObj.hittingRight || tooltipPositionObj.hittingLeft) && !tooltipPositionObj.closeToTop) {\n\t\t\t\t\tlocation = 'top';\n\t\t\t\t} else if ((tooltipPositionObj.hittingRight || tooltipPositionObj.hittingLeft) && tooltipPositionObj.closeToTop) {\n\t\t\t\t\tlocation = 'bottom';\n\t\t\t\t} else if (tooltipPositionObj.hittingTop && tooltipPositionObj.closeToRight) {\n\t\t\t\t\tlocation = 'left';\n\t\t\t\t} else if (tooltipPositionObj.hittingTop && tooltipPositionObj.closeToLeft) {\n\t\t\t\t\tlocation = 'right';\n\t\t\t\t} else if (!tooltipPositionObj.hittingRight && tooltipPositionObj.closeToRight) {\n\t\t\t\t\tlocation = 'left';\n\t\t\t\t} else if (!tooltipPositionObj.hittingLeft && tooltipPositionObj.closeToLeft) {\n\t\t\t\t\tlocation = 'right';\n\t\t\t\t} else if (tooltipPositionObj.closeToBottom && tooltipPositionObj.closeToTop) {\n\t\t\t\t\tlocation = 'top';\n\t\t\t\t} else if (tooltipPositionObj.closeToTop) {\n\t\t\t\t\tlocation = 'bottom';\n\t\t\t\t}\n\n\t\t\t\treturn location;\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * getTooltipPositionStatus\n\t\t\t */\n\t\t\tfunction getTooltipPositionStatus(containerWidth, containerHeight, point) {\n\t\t\t\tvar rectBBox = _Chart._gBBox;\n\n\t\t\t\tvar offsetY = point.y - _Chart._baseGroupBBox.height;\n\t\t\t\tvar offsetX = point.x - _Chart._baseGroupBBox.width / 2;\n\t\t\t\tvar offsetPadding = _Chart._caretWidth;\n\n\t\t\t\tvar topY = offsetY - offsetPadding;\n\t\t\t\tvar bottomY = point.y + offsetPadding;\n\t\t\t\tvar centerY = point.y - rectBBox.height / 2;\n\t\t\t\tvar leftX = point.x - _Chart._baseGroupBBox.width - _Chart.config('caretSize');\n\t\t\t\tvar rightX = point.x + offsetPadding + 5;\n\n\t\t\t\tvar closeToRight = point.x + _Chart._baseGroupBBox.width / 2 >= containerWidth;\n\t\t\t\tvar closeToLeft = point.x - _Chart._baseGroupBBox.width / 2 <= 0;\n\t\t\t\tvar closeToTop = point.y - _Chart._baseGroupBBox.height - offsetPadding - 3 <= 0;\n\t\t\t\tvar closeToBottom = point.y + _Chart._baseGroupBBox.height > containerHeight;\n\n\t\t\t\tvar hittingRight = closeToRight && point.x - _Chart._baseGroupBBox.width - offsetPadding <= 0;\n\t\t\t\tvar hittingLeft = closeToLeft && point.x + _Chart._baseGroupBBox.width + offsetPadding >= containerWidth;\n\t\t\t\tvar hittingTop = (closeToRight || closeToLeft) && (point.y - (_Chart._baseGroupBBox.height / 2) <= 0);\n\t\t\t\tvar hittingBottom = (closeToRight || closeToLeft) && (point.y + (_Chart._baseGroupBBox.height / 2) >= containerHeight);\n\n\t\t\t\treturn {\n\t\t\t\t\toffsetX: offsetX,\n\t\t\t\t\ttopY: topY,\n\t\t\t\t\tbottomY: bottomY,\n\t\t\t\t\tcenterY: centerY,\n\t\t\t\t\tleftX: leftX,\n\t\t\t\t\trightX: rightX,\n\t\t\t\t\tcloseToRight: closeToRight,\n\t\t\t\t\tcloseToLeft: closeToLeft,\n\t\t\t\t\tcloseToTop: closeToTop,\n\t\t\t\t\tcloseToBottom: closeToBottom,\n\t\t\t\t\thittingRight: hittingRight,\n\t\t\t\t\thittingLeft: hittingLeft,\n\t\t\t\t\thittingTop: hittingTop,\n\t\t\t\t\thittingBottom: hittingBottom\n\t\t\t\t};\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * SetBaseGroupBBoxDimensions\n\t\t\t * @param location position of the tooltip\n\t\t\t */\n\t\t\tfunction setBaseGroupBBoxDimensions(location) {\n\t\t\t\t_Chart._baseGroupBBox.height =\n\t\t\t\t\tlocation === 'top' || location === 'bottom' ?\n\t\t\t\t\t_Chart._gBBox.height + (_Chart.config('padding') * 2) + _Chart.config('caretSize') + 6 :\n\t\t\t\t\t_Chart._gBBox.height + (_Chart.config('padding') * 2) + 6;\n\n\t\t\t\t_Chart._baseGroupBBox.width =\n\t\t\t\t\tlocation === 'top' || location === 'bottom' ?\n\t\t\t\t\t_Chart._gBBox.width + (_Chart.config('padding') * 2) + 6 :\n\t\t\t\t\t_Chart._gBBox.width + (_Chart.config('padding') * 2) + _Chart.config('caretSize') + 6;\n\t\t\t}\n\n\n\n\n\n\t\t\t/*----------------------------------------------------------------------------------\n\t    // Helper Functions\n\t    ----------------------------------------------------------------------------------*/\n\n\t\t\t/**\n\t\t\t * Returns if appends is in text rect text format\n\t\t\t * @param appends\n\t\t\t * @returns {boolean}\n\t\t\t */\n\t\t\tfunction isTextRectText(appends) {\n\t\t\t\tvar returnVal = true;\n\t\t\t\tfor (var i = 0; i < appends.node().childNodes.length; i++) {\n\t\t\t\t\tvar nodeName = appends.node().childNodes[i].nodeName;\n\t\t\t\t\treturnVal = (i % 2 === 0 && nodeName === 'text' ? true : (nodeName === 'rect'));\n\t\t\t\t\tif (!returnVal) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn returnVal;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Formats appends as text rect text\n\t\t\t * @param appends\n\t\t\t * @param groupBBox\n\t\t\t */\n\t\t\tfunction formatAppendTextRectText(appends) {\n\t\t\t\tvar padding = 5;\n\t\t\t\tvar prevWidth = 0;\n\t\t\t\tvar groupBBox = {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0,\n\t\t\t\t\theight: 0,\n\t\t\t\t\twidth: 0\n\t\t\t\t};\n\n\t\t\t\tappends.select('rect').attr('height', 0);\n\t\t\t\tgroupBBox = appends.node().getBBox();\n\n\n\t\t\t\t/*jshint -W083 */\n\t\t\t\tfor (var i = 0; i < appends.node().childNodes.length; i++) {\n\t\t\t\t\tvar element = appends.node().childNodes[i];\n\n\t\t\t\t\tif (i % 2 === 0) {\n\t\t\t\t\t\t//text\n\t\t\t\t\t\tvar t = appends.select('text:nth-child(' + (i + 1) + ')')\n\t\t\t\t\t\t\t.attr({\n\t\t\t\t\t\t\t\tdy: function () {\n\t\t\t\t\t\t\t\t\treturn getCentralPosition(this);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tx: (prevWidth + (padding * i) + 1),\n\t\t\t\t\t\t\t\ty: groupBBox.height / 2\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\tprevWidth += element.getBBox().width;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//rect\n\t\t\t\t\t\tappends.select('rect:nth-child(' + (i + 1) + ')')\n\t\t\t\t\t\t\t.attr({\n\t\t\t\t\t\t\t\tx: (prevWidth + (padding * i)),\n\t\t\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\t\t\twidth: 1,\n\t\t\t\t\t\t\t\theight: groupBBox.height\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tappends.selectAll('tspan')\n\t\t\t\t\t.attr({\n\t\t\t\t\t\ttransform: function () {\n\t\t\t\t\t\t\treturn 'translate(0, ' + getCentralPosition(this) + ')';\n\t\t\t\t\t\t},\n\t\t\t\t\t\ty: groupBBox.height / 2\n\t\t\t\t\t});\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * setBaseGroupBBox\n\t\t\t */\n\t\t\tfunction setBaseGroupBBox() {\n\t\t\t\t_Chart._baseGroupBBox = cloneBBox(_Chart._baseGroup.node().getBBox());\n\t\t\t\t_Chart._baseGroupBBox.height = _Chart._baseGroupBBox.height - _Chart._caretWidth + 3;\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * Set gBBox's height and width to height, width if defined else\n\t\t\t * it will use appends BBox.\n\t\t\t * @param height\n\t\t\t * @param width\n\t\t\t */\n\t\t\tfunction setGBBox(height, width) {\n\t\t\t\tif (height !== undefined && width !== undefined) {\n\t\t\t\t\t_Chart._gBBox = {\n\t\t\t\t\t\t'height': height,\n\t\t\t\t\t\t'width': width\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\t_Chart._gBBox = _Chart._appends.node().getBBox();\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * Calculates vertical center for text\n\t\t\t * @param elem\n\t\t\t * @returns {number}\n\t\t\t */\n\t\t\tfunction getCentralPosition(elem) {\n\t\t\t\treturn parseInt(d3.select(elem)\n\t\t\t\t\t.style('font-size'), 10) * 0.35;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Returns a tranlate that keeps the path in bounds.\n\t\t\t * @param hittingEdge1\n\t\t\t * @param hittingEdge2\n\t\t\t * @param offset\n\t\t\t * @param dimension\n\t\t\t * @param heightOrWidth\n\t\t\t * @returns {*}\n\t\t\t */\n\t\t\tfunction getPathTranslate(hittingEdge1, hittingEdge2, offset, dimension, heightOrWidth) {\n\t\t\t\tvar translate;\n\n\t\t\t\tif (hittingEdge1) {\n\t\t\t\t\ttranslate = heightOrWidth - _Chart._baseGroupBBox[dimension] + r;\n\t\t\t\t} else if (hittingEdge2) {\n\t\t\t\t\ttranslate = r;\n\t\t\t\t} else {\n\t\t\t\t\ttranslate = offset;\n\t\t\t\t}\n\n\t\t\t\treturn translate;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * UpdateCaretPath\n\t\t\t * @param path\n\t\t\t * @param axis\n\t\t\t * @returns {.autoshot.default_options.options.path|*|.autoshot.default_options.options.local.path|options.path|options.local.path|path}\n\t\t\t */\n\t\t\tfunction updateCaretPath(path, axis) {\n\t\t\t\tvar pathString;\n\t\t\t\tvar xyString;\n\n\t\t\t\tif (axis === 'y') {\n\t\t\t\t\txyString = _Chart[path].caretX + ' ' + (_Chart[path].caretY - _Chart._moveY);\n\t\t\t\t} else {\n\t\t\t\t\txyString = (_Chart[path].caretX + _Chart._moveX) + ' ' + _Chart[path].caretY;\n\t\t\t\t}\n\n\t\t\t\tpathString = _Chart[path].path.match(/Z m (.*?) l/);\n\t\t\t\t_Chart[path].path = _Chart[path].path.replace(pathString[1], xyString);\n\t\t\t\treturn _Chart[path].path;\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * OffsetCaretAtEdge\n\t\t\t * @param config\n\t\t\t */\n\t\t\tfunction offsetCaretAtEdge(config) {\n\t\t\t\tvar container = config.container;\n\t\t\t\tvar point = config.point;\n\t\t\t\tvar tooltipWidth;\n\t\t\t\tvar tooltipHeight;\n\t\t\t\tvar bboxWidth;\n\t\t\t\tvar bboxHeight;\n\t\t\t\tvar mouseXOffset = container.width - point.x;\n\t\t\t\tvar mouseYOffset = point.y;\n\n\t\t\t\tvar curvedRectOffset = 2 * r; //Compensate for the curved rect path. 1 is for good measure.\n\n\t\t\t\tbboxHeight = _Chart._gBBox.height; // - curvedRectOffset;\n\t\t\t\tbboxWidth = _Chart._gBBox.width; //  - curvedRectOffset;\n\n\n\t\t\t\tvar farthestCaretPosition;\n\n\t\t\t\tif (config.left || config.right) {\n\n\t\t\t\t\t//Left\n\t\t\t\t\tif (config.left) {\n\t\t\t\t\t\ttooltipWidth = container.width - (_Chart._baseGroupBBox.width / 2);\n\t\t\t\t\t\t_Chart._moveX = tooltipWidth - mouseXOffset;\n\n\t\t\t\t\t\tif ((bboxWidth / 2) + _Chart.config('caretSize') <= _Chart._moveX) {\n\t\t\t\t\t\t\t_Chart._moveX = -((bboxWidth / 2) + _Chart.config('caretSize'));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t//Right\n\t\t\t\t\tif (config.right) {\n\t\t\t\t\t\ttooltipWidth = _Chart._baseGroupBBox.width / 2;\n\t\t\t\t\t\t_Chart._moveX = tooltipWidth - mouseXOffset;\n\n\t\t\t\t\t\tif (-((bboxWidth / 2) + _Chart.config('caretSize')) >= _Chart._moveX) {\n\t\t\t\t\t\t\t_Chart._moveX = -((bboxWidth / 2) + _Chart.config('caretSize'));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\n\t\t\t\t} else if (config.top || config.bottom) {\n\n\t\t\t\t\t//Top\n\t\t\t\t\tif (config.top) {\n\t\t\t\t\t\ttooltipHeight = _Chart._baseGroupBBox.height / 2;\n\t\t\t\t\t\t_Chart._moveY = tooltipHeight - mouseYOffset;\n\n\t\t\t\t\t\tfarthestCaretPosition = (bboxHeight / 2) + _Chart.config('caretSize') - curvedRectOffset;\n\n\t\t\t\t\t\tif (farthestCaretPosition <= _Chart._moveY) {\n\t\t\t\t\t\t\t_Chart._moveY = farthestCaretPosition;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t//Bottom\n\t\t\t\t\tif (config.bottom) {\n\t\t\t\t\t\ttooltipHeight = container.height - ((_Chart._baseGroupBBox.height) / 2);\n\t\t\t\t\t\t_Chart._moveY = tooltipHeight - mouseYOffset;\n\n\t\t\t\t\t\tfarthestCaretPosition = -(((bboxHeight) / 2) - _Chart.config('caretSize')) - curvedRectOffset;\n\n\t\t\t\t\t\tif (farthestCaretPosition >= _Chart._moveY) {\n\t\t\t\t\t\t\t_Chart._moveY = farthestCaretPosition;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t_Chart._moveX = 0;\n\t\t\t\t\t_Chart._moveY = 0;\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * GeneratePaths\n\t\t\t */\n\t\t\tfunction generatePaths() {\n\t\t\t\tvar w = _Chart._gBBox.width + (_Chart.config('padding') * 2);\n\t\t\t\tvar h = _Chart._gBBox.height + (_Chart.config('padding') * 2);\n\t\t\t\tvar c = _Chart.config('caretSize');\n\t\t\t\tvar y = (h / 2) + _Chart.config('caretSize') + r;\n\n\t\t\t\t_Chart._topPath = {\n\t\t\t\t\ttranslate: 'translate(' + (w / 2) + ',' + (h + c + r) + ')',\n\t\t\t\t\tcaretX: ((w / 2) - c),\n\t\t\t\t\tcaretY: (h + (r * 2))\n\t\t\t\t};\n\t\t\t\t_Chart._topPath.path = 'm -' + (w / 2) + ' -' + (h + c + (r * 2)) +\n\t\t\t\t\t' h ' + w +\n\t\t\t\t\t' c 1.7 0 ' + r + ' 1.3 ' + r + ' ' + r +\n\t\t\t\t\t' v ' + h +\n\t\t\t\t\t' c 0 1.7 -1.3 ' + r + ' -' + r + ' ' + r +\n\t\t\t\t\t' h -' + w +\n\t\t\t\t\t' c -1.7 0 -' + r + ' -1.3 -' + r + ' -' + r +\n\t\t\t\t\t' v -' + h +\n\t\t\t\t\t' c 0 -1.7 1.3 -' + r + ' ' + r + ' -' + r +\n\t\t\t\t\t' Z m ' + _Chart._topPath.caretX + ' ' + _Chart._topPath.caretY +\n\t\t\t\t\t' l ' + c + ' ' + c +\n\t\t\t\t\t' l ' + c + ' -' + c;\n\n\t\t\t\t_Chart._bottomPath = {\n\t\t\t\t\ttranslate: 'translate(' + (w / 2) + ',' + (-c + (r / 2)) + ')',\n\t\t\t\t\tcaretX: ((w / 2) - c),\n\t\t\t\t\tcaretY: 0\n\t\t\t\t};\n\t\t\t\t_Chart._bottomPath.path = 'm -' + (w / 2) + ' ' + 0 +\n\t\t\t\t\t' h ' + w +\n\t\t\t\t\t' c 1.7 0 ' + r + ' 1.3 ' + r + ' ' + r +\n\t\t\t\t\t' v ' + h +\n\t\t\t\t\t' c 0 1.7 -1.3 ' + r + ' -' + r + ' ' + r +\n\t\t\t\t\t' h -' + w +\n\t\t\t\t\t' c -1.7 0 -' + r + ' -1.3 -' + r + ' -' + r +\n\t\t\t\t\t' v -' + h +\n\t\t\t\t\t' c 0 -1.7 1.3 -' + r + ' ' + r + ' -' + r +\n\t\t\t\t\t' Z m ' + _Chart._bottomPath.caretX + ' ' + _Chart._bottomPath.caretY +\n\t\t\t\t\t' l ' + c + ' -' + c +\n\t\t\t\t\t' l ' + c + ' ' + c;\n\n\t\t\t\t_Chart._leftPath = {\n\t\t\t\t\ttranslate: 'translate(' + (w + c + r) + ',' + (h / 2) + ')',\n\t\t\t\t\tcaretX: (w + r),\n\t\t\t\t\tcaretY: y\n\t\t\t\t};\n\t\t\t\t_Chart._leftPath.path = 'm -' + (w + c + r) + ' ' + -((h / 2) + r) +\n\t\t\t\t\t' h ' + w +\n\t\t\t\t\t' c 1.7 0 ' + r + ' 1.3 ' + r + ' ' + r +\n\t\t\t\t\t' v ' + h +\n\t\t\t\t\t' c 0 1.7 -1.3 ' + r + ' -' + r + ' ' + r +\n\t\t\t\t\t' h -' + w +\n\t\t\t\t\t' c -1.7 0 -' + r + ' -1.3 -' + r + ' -' + r +\n\t\t\t\t\t' v -' + h +\n\t\t\t\t\t' c 0 -1.7 1.3 -' + r + ' ' + r + ' -' + r +\n\t\t\t\t\t' Z m ' + _Chart._leftPath.caretX + ' ' + _Chart._leftPath.caretY +\n\t\t\t\t\t' l ' + c + ' -' + c +\n\t\t\t\t\t' l -' + c + ' -' + c;\n\n\t\t\t\t_Chart._rightPath = {\n\t\t\t\t\ttranslate: 'translate(' + -(c + r) + ',' + (h / 2) + ')',\n\t\t\t\t\tcaretX: -r,\n\t\t\t\t\tcaretY: y\n\t\t\t\t};\n\t\t\t\t_Chart._rightPath.path = 'm ' + (c + r) + ' ' + -((h / 2) + r) +\n\t\t\t\t\t' h ' + w +\n\t\t\t\t\t' c 1.7 0 ' + r + ' 1.3 ' + r + ' ' + r +\n\t\t\t\t\t' v ' + h +\n\t\t\t\t\t' c 0 1.7 -1.3 ' + r + ' -' + r + ' ' + r +\n\t\t\t\t\t' h -' + w +\n\t\t\t\t\t' c -1.7 0 -' + r + ' -1.3 -' + r + ' -' + r +\n\t\t\t\t\t' v -' + h +\n\t\t\t\t\t' c 0 -1.7 1.3 -' + r + ' ' + r + ' -' + r +\n\t\t\t\t\t' Z m ' + _Chart._rightPath.caretX + ' ' + _Chart._rightPath.caretY +\n\t\t\t\t\t' l -' + c + ' -' + c +\n\t\t\t\t\t' l ' + c + ' -' + c + ' Z';\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * cloneBBox, IE will not let you modify the obj returned from getBBox\n\t\t\t * @param box\n\t\t\t * @returns {{x: *, y: *, width: *, height: *}}\n\t\t\t */\n\t\t\tfunction cloneBBox(box) {\n\t\t\t\treturn {\n\t\t\t\t\tx: box.x,\n\t\t\t\t\ty: box.y,\n\t\t\t\t\twidth: box.width,\n\t\t\t\t\theight: box.height\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tpreDraw() {\n\t\t\tthis._container = this.config('container');\n\t\t}\n\t}\n\n\tvar _Tooltip = Tooltip;\n\n\t/**\n\t * This will convert a flat, 2D array into a nested data structure.\n\t * Simular to d3.nest but allows n number of depths for each node\n\t */\n\n\t// jscs:disable\n\tfunction hierarchy () {\n\t  var nest = {},\n\t      keys = [],\n\t      sortKeys = [],\n\t      maxLength = 0,\n\t      sortValues,\n\t      rollup,\n\t      filter = function (d) {\n\t        return d !== null;\n\t      };\n\n\t function keySetter (depth) {\n\t    return function (d) {\n\t      return d[depth];\n\t    };\n\t  }\n\n\t  function map(mapType, array, depth) {\n\t    if (depth >= maxLength) {\n\t      return rollup\n\t        ? rollup.call(nest, array) : (sortValues\n\t        ? array.sort(sortValues)\n\t        : array);\n\t    }\n\n\t    var i = -1,\n\t        n = array.length,\n\t        key = keySetter(depth++),\n\t        keyValue,\n\t        object,\n\t        setter,\n\t        size,\n\t        valuesByKey = d3.map({}),\n\t        values;\n\n\t    /*jshint -W084 */\n\t    while (++i < n) {\n\t      if (depth === 1) {\n\t        object = array[i].filter(filter);\n\t      } else {\n\t        object = array[i];\n\t      }\n\t      values = valuesByKey.get(keyValue = key(object));\n\t      if (array[i].length > depth) {\n\t        if (values) {\n\t          values.push(object);\n\t        } else {\n\t          valuesByKey.set(keyValue, [object]);\n\t        }\n\t      }\n\t    }\n\n\t    if (mapType) {\n\t      object = mapType();\n\t      size = function (object) {\n\t        return object.size();\n\t      };\n\t      setter = function(keyValue, values) {\n\t        object.set(keyValue, map(mapType, values, depth));\n\t      };\n\t    } else {\n\t      object = {};\n\t      size = function (object) {\n\t        return Object.keys(object).length;\n\t      };\n\t      setter = function(keyValue, values) {\n\t        object[keyValue] = map(mapType, values, depth);\n\t      };\n\t    }\n\n\t    valuesByKey.forEach(setter);\n\t    if (!size(object)) {\n\t      return array;\n\t    }\n\t    return object;\n\t  }\n\n\t  function entries(map, depth) {\n\t    if (depth >= maxLength || depth > map.length - 1) {\n\t      return map;\n\t    }\n\n\t    var array = [],\n\t        sortKey = sortKeys[depth++];\n\n\t    map.forEach(function(key, keyMap) {\n\t      array.push({name: key, children: entries(keyMap, depth)});\n\t    });\n\n\t    return sortKey\n\t      ? array.sort(function(a, b) { return sortKey(a.name, b.name); })\n\t      : array;\n\t  }\n\n\t  nest.map = function(array, mapType) {\n\t    return map(mapType, array, 0);\n\t  };\n\n\t  nest.entries = function(array) {\n\t    return entries(map(d3.map, array, 0), 0);\n\t  };\n\n\t  nest.maxLength = function(newMaxLength) {\n\t    maxLength = newMaxLength - 2;\n\t    return nest;\n\t  };\n\n\t  nest.filter = function (f) {\n\t    filter = f;\n\t    return nest;\n\t  };\n\n\t  // Specifies the order for the most-recently specified key.\n\t  // Note: only applies to entries. Map keys are unordered!\n\t  nest.sortKeys = function(order, depth) {\n\t    depth = depth || maxLength;\n\t    sortKeys[depth] = order;\n\t    return nest;\n\t  };\n\n\t  // Specifies the order for leaf values.\n\t  // Applies to both maps and entries array.\n\t  nest.sortValues = function(order) {\n\t    sortValues = order;\n\t    return nest;\n\t  };\n\n\t  nest.rollup = function(f) {\n\t    rollup = f;\n\t    return nest;\n\t  };\n\n\t  return nest;\n\t}\n\t// jscs:enable\n\n\tvar _hierarchy = hierarchy;\n\n\tclass Icicle extends koto.Base {\n\t\tconstructor(selection) {\n\t    super(selection);\n\t    var _Chart = this;\n\n\t    [{\n\t      name: 'height',\n\t      description: 'The height of the chart.',\n\t      value: 700,\n\t      type: 'number',\n\t      units: 'px',\n\t      category: 'Size',\n\t      getter: function (){\n\t        // get value\n\t        console.log('getter');\n\t        return this.value;\n\t      },\n\t      setter: function (newValue){\n\t        // Set something\n\t        console.log('setter');\n\t        return newValue;\n\t      }\n\t    }, {\n\t      name: 'width',\n\t      description: 'The widthj of the chart.',\n\t      value: 900,\n\t      units: 'px',\n\t      type: 'number',\n\t      category: 'Size'\n\t    }, {\n\t      name: 'transitionDuration',\n\t      description: 'How long should it take to animate on click.',\n\t      value: 750,\n\t      units: 'ms',\n\t      type: 'number',\n\t      category: 'Animation'\n\t    }, {\n\t      name: 'introDuration',\n\t      description: 'How long should it take to animate in.',\n\t      value: 2000,\n\t      units: 'ms',\n\t      type: 'number',\n\t      category: 'Animation'\n\t    }, {\n\t      name: 'colorRange',\n\t      value: ['#BBE491', '#FB8D34', '#E45621', '#73B0D7'],\n\t      description: 'colors for categories',\n\t      type: 'colorArray',\n\t      category: 'Color'\n\t    }].forEach(function (item) {\n\t      _Chart.configs.set(item.name, item);\n\t    });\n\n\t    // accessors\n\t    this.accessor('name', function (d) { return d[d.length-2]; });\n\n\t    // formatters\n\t    var percent = d3.format('%');\n\t    var overUnder = d3.format('+%');\n\n\t    // scales\n\t    this.x = d3.scale.linear();\n\t    this.y = d3.scale.linear();\n\t    this.color = d3.scale.ordinal();\n\n\t    // layouts\n\t    this.partition = d3.layout.partition()\n\t      .value(function(d) { return d[d.length - 1]; });\n\n\t    // setup main group\n\t    this._group = this.base.append('g');\n\t    \n\t    // Set up tool tip;\n\t    this._tooltip = new _Tooltip(this.base.append('g'));\n\n\t    this._tooltip.config({\n\t      opacity: 1,\n\t      format: 'textRectText'\n\t    });\n\n\t    this._tooltipValue = this._tooltip._appends.append('text')\n\t      .style('font-family', 'Open Sans');\n\t    this._tooltipRect = this._tooltip._appends.append('rect');\n\t    this._tooltipLabel = this._tooltip._appends.append('text')\n\t      .style('font-family', 'Open Sans');\n\t    \n\t    this._tooltip.trigger('draw');\n\t    this._tooltip.trigger('remove');\n\t    \n\t    // Setup Layers\n\t    var icicle = this.layer('icicle', this._group, {\n\t      dataBind: function (data) {\n\t        var root = _Chart.partition(data[0]);\n\t        if (_Chart._targetData) {\n\t          var target = _Chart.partition(_Chart._targetData[0]);\n\t          for (var i=0; i < root.length; i++) {\n\t            root[i].target = target[i].value;\n\t          }\n\t        }\n\t        return this.selectAll('g').data(root);\n\t      },\n\t      insert: function () {\n\t        return this.append('g')\n\t          .on('click', click)\n\t          .on('mouseover', function (d) {\n\t            _Chart._group.selectAll('rect')\n\t              .filter(function (datum) {\n\t                var thingName = d.name ? d.name : d[d.length - 2];\n\t                return !isRelated(d, datum);\n\t              })\n\t              .style('fill', '#e3e3e3');\n\n\t              _Chart._tooltipValue\n\t                .text(d.name ? d.name : _Chart.accessor('name')(d));\n\n\t              _Chart._tooltipRect.style('fill', '#000');\n\n\t              _Chart._tooltipLabel\n\t                .text(percent(d.value));\n\n\t              if (_Chart._targetData) {\n\t                _Chart._tooltipRect2.style('fill', '#000');\n\t                _Chart._tooltipLabel2\n\t                  .text(overUnder(d.value - d.target));\n\t              }\n\n\t              _Chart._tooltip.trigger('draw');\n\t            })\n\t            .on('mousemove', function () {\n\t              var coordinates = d3.mouse(_Chart.base.node());\n\t              _Chart._tooltip.trigger('moveTo', {x: coordinates[0], y: coordinates[1]}, null, _Chart.config('width'), _Chart.config('height'));\n\t            })\n\t            .on('mouseout', function (d) {\n\t              _Chart._group.selectAll('rect')\n\t                .style('fill', function(d) { return _Chart.color(d.base); });\n\n\t              _Chart._tooltip.trigger('remove');\n\t            });\n\t      }\n\t    });\n\t  \n\t    // layer life-cycle events\n\t    icicle.on('enter', function () {\n\t      this.append('rect')\n\t        .style('stroke', '#fff');\n\t      \n\t      if (_Chart._targetData) {\n\t        this.append('path');\n\t      }\n\n\t      this.append('text')\n\t        .style('pointer-events', 'none');\n\n\t      return this;\n\t    })\n\t    .on('merge', function () {\n\t      // boxes\n\t      this.select('rect')\n\t        .attr('x', function(d) { return _Chart.x(d.x); })\n\t        .attr('y', function(d) { return _Chart.y(d.y); })\n\t        .attr('width', function(d) { return _Chart.x(d.dx); })\n\t        .attr('height', 0)\n\t        .style('fill', function(d) { d.base = getParent(d, _Chart.rootName); return _Chart.color(d.base); });\n\n\t      // over-under indicator\n\t      if (_Chart._targetData) {\n\t        this.select('path')\n\t          .style('fill', '#555')\n\t          .style('opacity', 0)\n\t          .attr({\n\t            d: function (d) {\n\t              var symbol = d3.svg.symbol();\n\t              var gen = d.value > d.target ? symbol.type('triangle-up') : d.value < d.target ? symbol.type('triangle-down') : symbol.type('triangle-down');\n\t              return gen();\n\t            },\n\t            transform: function (d) {\n\t              var left = _Chart.x(d.x) + 15;\n\t              var top = _Chart.y(d.y) + 15;\n\t              \n\t              return `translate(${left},${top})`;\n\t            }\n\t          });\n\t      }\n\n\t      // labels\n\t      this.select('text')\n\t        .text(function (d) { return d.name ? d.name : d[d.length - 2]; })\n\t        .attr('x', function(d) { return _Chart.x(d.x); })\n\t        .attr('dx', _Chart._targetData ? 25 : 5)\n\t        .attr('y', function(d) { return _Chart.y(d.y); })\n\t        .attr('dy', 16)\n\t        .style('alignment-baseline', 'middle')\n\t        .style('fill', '#555')\n\t        .style('font-family', 'Open Sans')\n\t        .style('opacity', 0);\n\t    })\n\t    .on('merge:transition', function () {\n\t      var totalDuration = _Chart.config('introDuration');\n\t      var duration = totalDuration/(_Chart.max-1);\n\t      \n\t      // rects\n\t      this\n\t        .duration(duration)\n\t        .ease('linear')\n\t        .delay(function (d) { return d.depth * duration; })\n\t        .select('rect')\n\t        .attr('height', function(d) { return _Chart.y(d.dy); });\n\t      \n\t      // paths\n\t      if (_Chart._targetData) {\n\t        this\n\t          .delay(totalDuration)\n\t          .selectAll('path')\n\t          .style('opacity', function (d) {\n\t            var shouldShow = d.value > d.target || d.value < d.target;\n\t            var canFit = _Chart.x(d.dx) > 25;\n\t            return shouldShow && canFit ? 1 : 0;\n\t          });\n\t      }\n\n\t      // linear\n\t      this\n\t        .duration(duration)\n\t        .ease('linear')\n\t        .delay(function (d) { return d.depth * duration; })\n\t        .select('text')\n\t        .style('opacity', function (d) {\n\t          d.textLength = this.getComputedTextLength();\n\t          return (d.textLength + 30) < _Chart.x(d.dx) ? 1 : 0;\n\t        });\n\t      return this;\n\t    });\n\n\t    // click event handler\n\t    function click(d) {\n\t      _Chart.x.domain([d.x, d.x + d.dx]);\n\t      _Chart.y.domain([d.y, 1]).range([d.y ? 20 : 0, _Chart.config('height')]);\n\n\t      // transition Rects\n\t      _Chart._group.selectAll('rect')\n\t        .transition()\n\t        .duration(_Chart.config('transitionDuration'))\n\t        .attr('x', function(d) { return _Chart.x(d.x); })\n\t        .attr('y', function(d) { return _Chart.y(d.y); })\n\t        .attr('width', function(d) { return _Chart.x(d.x + d.dx) - _Chart.x(d.x); })\n\t        .attr('height', function(d) { return _Chart.y(d.y + d.dy) - _Chart.y(d.y); });\n\n\t      // transition paths\n\t      if (_Chart._targetData) {\n\t        _Chart._group.selectAll('path')\n\t          .transition()\n\t          .duration(_Chart.config('transitionDuration'))\n\t          .attr('transform', function (d) {\n\t            var left = _Chart.x(d.x) + 15;\n\t            var top = _Chart.y(d.y) + 15;\n\t            return `translate(${left},${top})`;\n\t          });\n\t      }\n\n\t      // transition text\n\t      _Chart._group.selectAll('text')\n\t        .transition()\n\t        .duration(_Chart.config('transitionDuration'))\n\t        .attr('x', function(d) { return _Chart.x(d.x); })\n\t        .attr('y', function(d) { return _Chart.y(d.y); })\n\t        .style('opacity', function (d) {\n\t          return (d.textLength + 12) < (_Chart.x(d.x + d.dx) - _Chart.x(d.x)) ? 1 : 0;\n\t        });\n\t    }\n\n\t    // check to see if nodes are related\n\t    function isRelated(thing, relative) {\n\t      return (isChild(thing, relative) || isParent(thing, relative));\n\t    }\n\n\t    // check to see if node is child\n\t    function isChild(thing, relative) {\n\t      if (thing === relative) {\n\t        return true;\n\t      }\n\t      if (!thing.parent) {\n\t        return false;\n\t      }\n\t      return isChild(thing.parent, relative);\n\t    }\n\n\t    // check to see if node is parent\n\t    function isParent (thing, relative) {\n\t      var i;\n\t      var temp;\n\t      if (thing === relative) {\n\t        return true;\n\t      }\n\t      if (!thing.children) {\n\t        return false;\n\t      }\n\t      for (i=0; i < thing.children.length; i++) {\n\t        if (isParent(thing.children[i], relative)) {\n\t          return true;\n\t        }\n\t      }\n\t      return false;\n\t    }\n\n\t    // get parents name - for color\n\t    function getParent (d, rootName) {\n\t      if (!d.parent) {\n\t        return d.name;\n\t      }\n\t      if (d.parent.name === rootName) {\n\t        return d.name;\n\t      }\n\t      return getParent(d.parent, rootName);\n\t    }\n\t  }\n\n\t  transform(data){\n\t    this.max = d3.max(data, function (row) { return row.length; });\n\t    return _hierarchy()\n\t      .maxLength(this.max)\n\t      .entries(data);\n\t  }\n\n\t  targetData(data){\n\t    this._targetData = _hierarchy()\n\t      .maxLength(this.max)\n\t      .entries(data);\n\n\t    this._tooltipRect2 = this._tooltip._appends.append('rect');\n\t    this._tooltipLabel2 = this._tooltip._appends.append('text')\n\t      .style('font-family', 'Open Sans');\n\t    return this;\n\t  }\n\n\t  preDraw(data){\n\t    this.x.range([0, this.config('width')]);\n\t    this.y.range([0, this.config('height')]);\n\t    this.rootName = data[0].name;\n\t    \n\t    var level1 = data[0].children.map(function (child) { return child.name; });\n\t    level1.push(this.rootName);\n\t    this.color.range(this.config('colorRange')).domain(level1);\n\t  }\n\t}\n\n\tkoto.Icicle = Icicle;\n\n\tvar chart = koto.Icicle;\n\n\treturn chart;\n\n}));\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('d3'), require('koto')) :\n\ttypeof define === 'function' && define.amd ? define(['d3', 'koto'], factory) :\n\tglobal.koto.Icicle = factory(global.d3, global.koto)\n}(this, function (d3, koto) { 'use strict';\n\n\tclass Tooltip extends koto.Base {\n\t\tconstructor(selection) {\n\t\t\tsuper(selection);\n\t\t\tvar _Chart = this;\n\n\t\t\tvar configs = {\n\t\t\t\tcontainer: this.base,\n\t\t\t\topacity: 0,\n\t\t\t\tpadding: 7,\n\t\t\t\tcaretSize: 5,\n\t\t\t\tstationary: false,\n\t\t\t\tmaxWidth: 200,\n\t\t\t\tformat: 'default',\n\t\t\t\ttooltipBackgroundColor: '#fff'\n\t\t\t};\n\n\t\t\tfor (var key in configs) {\n\t\t\t\tthis.configs.set(key, {\n\t\t\t\t\tvalue: configs[key]\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar formats = {\n\t\t\t\tdefault: function (appends) {},\n\t\t\t\ttext: function (appends) {\n\t\t\t\t\t//Automatically position if there is only one text element appended\n\t\t\t\t\tif (appends[0].length === 1 && appends.node().childNodes[0].nodeName === 'text') {\n\n\t\t\t\t\t\tvar textBBox = appends.node().childNodes[0].getBBox();\n\n\t\t\t\t\t\tappends.select('text')\n\t\t\t\t\t\t\t.attr({\n\t\t\t\t\t\t\t\tdy: function () {\n\t\t\t\t\t\t\t\t\treturn getCentralPosition(this);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ty: textBBox.height / 2\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tappends.selectAll('tspan')\n\t\t\t\t\t\t\t.attr({\n\t\t\t\t\t\t\t\tdy: function () {\n\t\t\t\t\t\t\t\t\treturn getCentralPosition(this);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ty: textBBox.height / 2\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttextBlock: function (appends) {\n\n\t\t\t\t\tvar textElement = appends.select('text');\n\t\t\t\t\tvar dy = textElement.node().getBoundingClientRect().height;\n\t\t\t\t\td3.domoStrings.wrapText(textElement, _Chart.config('maxWidth'));\n\n\t\t\t\t\tappends.select('text').attr({\n\t\t\t\t\t\ty: dy - (dy / 4)\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\ttextRectText: function (appends) {\n\t\t\t\t\t//Automatically format for text rect text pattern\n\t\t\t\t\tif (appends.node().childNodes.length % 2 !== 0) {\n\n\t\t\t\t\t\tif (isTextRectText(appends)) {\n\t\t\t\t\t\t\tformatAppendTextRectText(appends);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar r = 3; //Radius to round the rect\n\n\t\t\tthis._baseGroup = this.base.append('g')\n\t\t\t\t.attr('transform', 'translate(0, 0)')\n\t\t\t\t.style('pointer-events', 'none');\n\n\t\t\t_Chart._parent = _Chart._baseGroup.node().parentNode;\n\n\t\t\tthis._baseGroup.append('path')\n\t\t\t\t.attr('class', 'toolTipPath')\n\t\t\t\t.style('opacity', 0.9);\n\n\t\t\tthis._appends = this._baseGroup.append('g');\n\n\t\t\t_Chart._drawn = false;\n\t\t\t_Chart._moveX = undefined;\n\t\t\t_Chart._moveY = undefined;\n\n\t\t\t/**\n\t\t\t * This will hide the tooltip properly\n\t\t\t */\n\t\t\tthis.on('remove', function () {\n\t\t\t\t_Chart._drawn = false;\n\n\t\t\t\tif (d3.select('html').node().contains(_Chart._baseGroup.node())) {\n\t\t\t\t\t_Chart._parent.removeChild(_Chart._baseGroup.node());\n\t\t\t\t}\n\t\t\t});\n\n\n\n\t\t\t/**\n\t\t\t * This will re-draw the tool tip with the correct dimensions around the _appends group\n\t\t\t * @param  {number} width  override the width of the container\n\t\t\t * @param  {number} height  override the height of the container\n\t\t\t */\n\t\t\tthis.on('draw', function (width, height) {\n\t\t\t\t_Chart._parent.appendChild(_Chart._baseGroup.node());\n\n\t\t\t\t_Chart._container = _Chart.config('container');\n\t\t\t\t_Chart._caretWidth = _Chart.config('caretSize') * 2;\n\t\t\t\t_Chart._containerBBox = _Chart.config('container').node().getBoundingClientRect();\n\n\t\t\t\t//Format\n\t\t\t\t_Chart._baseGroup.select('.toolTipPath').style('fill', _Chart.config('tooltipBackgroundColor'));\n\t\t\t\t_Chart._appends.attr('transform', 'translate(' + _Chart.config('padding') + ', ' + _Chart.config('padding') + ')');\n\t\t\t\tformats[_Chart.config('format')](_Chart._appends);\n\n\t\t\t\tsetGBBox(height, width);\n\t\t\t\tsetBaseGroupBBox();\n\t\t\t\tgeneratePaths();\n\n\t\t\t\t_Chart._baseGroup\n\t\t\t\t\t.select('.toolTipPath')\n\t\t\t\t\t.attr({\n\t\t\t\t\t\t'transform': _Chart._topPath.translate,\n\t\t\t\t\t\td: _Chart._topPath.path\n\t\t\t\t\t});\n\n\t\t\t\t_Chart._drawn = true;\n\t\t\t});\n\n\n\n\t\t\t/**\n\t\t\t * This will move the tooltip wherever you will it to be\n\t\t\t * @param  {object} point     Object with an x and y\n\t\t\t * @param  {string} location  String that will overide the location of the tooltip\n\t\t\t * @param  {number} newWidth  This will override the width of the tooltip's bounds\n\t\t\t * @param  {number} newHeight This will override the height of the tooltip's bounds\n\t\t\t */\n\t\t\tthis.on('moveTo', function (point, location, newWidth, newHeight) {\n\t\t\t\tsetBaseGroupBBoxDimensions(location);\n\n\t\t\t\tif (_Chart._drawn) {\n\n\t\t\t\t\tvar containerWidth = newWidth ? newWidth : _Chart._containerBBox.width;\n\t\t\t\t\tvar containerHeight = newHeight ? newHeight : _Chart._containerBBox.height;\n\t\t\t\t\tvar baseGroup = _Chart._baseGroup;\n\t\t\t\t\tvar tooltipPositionObj = getTooltipPositionStatus(containerWidth, containerHeight, point);\n\n\t\t\t\t\tif (!location) {\n\t\t\t\t\t\tlocation = determineInboundsTooltipLocation(tooltipPositionObj);\n\t\t\t\t\t}\n\n\t\t\t\t\toffsetCaretAtEdge({\n\t\t\t\t\t\tleft: tooltipPositionObj.hittingLeft,\n\t\t\t\t\t\tright: tooltipPositionObj.hittingRight,\n\t\t\t\t\t\ttop: tooltipPositionObj.hittingTop,\n\t\t\t\t\t\tbottom: tooltipPositionObj.hittingBottom,\n\t\t\t\t\t\tcontainer: {\n\t\t\t\t\t\t\theight: containerHeight,\n\t\t\t\t\t\t\twidth: containerWidth\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpoint: point\n\t\t\t\t\t});\n\n\t\t\t\t\tvar posAndPathObj = calPositionAndPath(location, tooltipPositionObj, containerHeight, containerWidth);\n\n\t\t\t\t\tbaseGroup.attr('transform', 'translate(' + posAndPathObj.translateX + ',' + posAndPathObj.translateY + ')');\n\n\t\t\t\t\tbaseGroup\n\t\t\t\t\t\t.select('.toolTipPath')\n\t\t\t\t\t\t.attr({\n\t\t\t\t\t\t\t'transform': posAndPathObj.translate,\n\t\t\t\t\t\t\td: posAndPathObj.path\n\t\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t});\n\n\n\t\t\t/*----------------------------------------------------------------------------------\n\t    // MoveTo Helper Functions\n\t    ----------------------------------------------------------------------------------*/\n\n\t\t\t/**\n\t\t\t * getTopLocationsAndPath\n\t\t\t */\n\t\t\tfunction getTopLocationsAndPath(tooltipPositionObj, containerWidth) {\n\n\t\t\t\tvar path;\n\t\t\t\tvar translate;\n\t\t\t\tvar translateX;\n\t\t\t\tvar translateY;\n\n\t\t\t\ttranslateX = getPathTranslate(\n\t\t\t\t\ttooltipPositionObj.hittingRight,\n\t\t\t\t\ttooltipPositionObj.hittingLeft, (tooltipPositionObj.offsetX + (_Chart.config('caretSize'))),\n\t\t\t\t\t'width',\n\t\t\t\t\tcontainerWidth\n\t\t\t\t);\n\n\t\t\t\ttranslateY = tooltipPositionObj.topY;\n\t\t\t\ttranslate = _Chart._topPath.translate;\n\n\t\t\t\tif (_Chart._moveX !== 0) {\n\t\t\t\t\tpath = updateCaretPath('_topPath', 'x');\n\t\t\t\t} else {\n\t\t\t\t\tpath = _Chart._topPath.path;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\ttranslateX: translateX,\n\t\t\t\t\ttranslateY: translateY,\n\t\t\t\t\ttranslate: translate,\n\t\t\t\t\tpath: path\n\t\t\t\t};\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * getRightPositionAndPath\n\t\t\t */\n\t\t\tfunction getRightPositionAndPath(tooltipPositionObj, containerHeight) {\n\n\t\t\t\tvar path;\n\t\t\t\tvar translate;\n\t\t\t\tvar translateX;\n\t\t\t\tvar translateY;\n\n\t\t\t\ttranslateY = getPathTranslate(\n\t\t\t\t\ttooltipPositionObj.hittingBottom,\n\t\t\t\t\ttooltipPositionObj.hittingTop, (tooltipPositionObj.centerY - _Chart.config('padding')),\n\t\t\t\t\t'height',\n\t\t\t\t\tcontainerHeight\n\t\t\t\t);\n\n\t\t\t\ttranslateX = tooltipPositionObj.rightX;\n\t\t\t\ttranslate = _Chart._rightPath.translate;\n\n\t\t\t\tif (_Chart._moveY !== 0) {\n\t\t\t\t\tpath = updateCaretPath('_rightPath', 'y');\n\t\t\t\t} else {\n\t\t\t\t\tpath = _Chart._rightPath.path;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\ttranslateX: translateX,\n\t\t\t\t\ttranslateY: translateY,\n\t\t\t\t\ttranslate: translate,\n\t\t\t\t\tpath: path\n\t\t\t\t};\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * getBottomPositionAndPath\n\t\t\t */\n\t\t\tfunction getBottomPositionAndPath(tooltipPositionObj, containerWidth) {\n\n\t\t\t\tvar path;\n\t\t\t\tvar translate;\n\t\t\t\tvar translateX;\n\t\t\t\tvar translateY;\n\n\t\t\t\ttranslateX = getPathTranslate(\n\t\t\t\t\ttooltipPositionObj.hittingRight,\n\t\t\t\t\ttooltipPositionObj.hittingLeft, (tooltipPositionObj.offsetX + (_Chart.config('caretSize') / 2)),\n\t\t\t\t\t'width',\n\t\t\t\t\tcontainerWidth\n\t\t\t\t);\n\n\t\t\t\ttranslateY = (tooltipPositionObj.bottomY + _Chart.config('padding')) + 5;\n\t\t\t\ttranslate = _Chart._bottomPath.translate;\n\n\t\t\t\tif (_Chart._moveX !== 0) {\n\t\t\t\t\tpath = updateCaretPath('_bottomPath', 'x');\n\t\t\t\t} else {\n\t\t\t\t\tpath = _Chart._bottomPath.path;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\ttranslateX: translateX,\n\t\t\t\t\ttranslateY: translateY,\n\t\t\t\t\ttranslate: translate,\n\t\t\t\t\tpath: path\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * getLeftPositionAndPath\n\t\t\t */\n\t\t\tfunction getLeftPositionAndPath(tooltipPositionObj, containerHeight) {\n\t\t\t\tvar path;\n\t\t\t\tvar translate;\n\t\t\t\tvar translateX;\n\t\t\t\tvar translateY;\n\n\t\t\t\ttranslateY = getPathTranslate(\n\t\t\t\t\ttooltipPositionObj.hittingBottom,\n\t\t\t\t\ttooltipPositionObj.hittingTop, (tooltipPositionObj.centerY - _Chart.config('padding')),\n\t\t\t\t\t'height',\n\t\t\t\t\tcontainerHeight\n\t\t\t\t);\n\n\t\t\t\ttranslateX = tooltipPositionObj.leftX;\n\t\t\t\ttranslate = _Chart._leftPath.translate;\n\n\t\t\t\tif (_Chart._moveY !== 0) {\n\t\t\t\t\tpath = updateCaretPath('_leftPath', 'y');\n\t\t\t\t} else {\n\t\t\t\t\tpath = _Chart._leftPath.path;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\ttranslateX: translateX,\n\t\t\t\t\ttranslateY: translateY,\n\t\t\t\t\ttranslate: translate,\n\t\t\t\t\tpath: path\n\t\t\t\t};\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * Returns the tooltips draw position and path given the current draw location.\n\t\t\t *\n\t\t\t * @param location\n\t\t\t * @param tooltipPositionObj\n\t\t\t * @param containerHeight\n\t\t\t * @returns {{translateX: *, translateY: *, translate: *, path: *}}\n\t\t\t */\n\t\t\tfunction calPositionAndPath(location, tooltipPositionObj, containerHeight, containerWidth) {\n\n\t\t\t\tvar positionAndPath;\n\n\t\t\t\tswitch (location) {\n\t\t\t\tcase 'top':\n\t\t\t\t\t{\n\t\t\t\t\t\tpositionAndPath = getTopLocationsAndPath(tooltipPositionObj, containerWidth);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\tcase 'right':\n\t\t\t\t\t{\n\t\t\t\t\t\tpositionAndPath = getRightPositionAndPath(tooltipPositionObj, containerHeight);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\tcase 'bottom':\n\t\t\t\t\t{\n\t\t\t\t\t\tpositionAndPath = getBottomPositionAndPath(tooltipPositionObj, containerWidth);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\tcase 'left':\n\t\t\t\t\t{\n\t\t\t\t\t\tpositionAndPath = getLeftPositionAndPath(tooltipPositionObj, containerHeight);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn positionAndPath;\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * Determine the direction the tooltip should draw given its location.\n\t\t\t * @param tooltipPositionObj\n\t\t\t * @returns {string}\n\t\t\t */\n\t\t\tfunction determineInboundsTooltipLocation(tooltipPositionObj) {\n\n\t\t\t\tvar location = 'top';\n\t\t\t\tif ((tooltipPositionObj.hittingRight || tooltipPositionObj.hittingLeft) && !tooltipPositionObj.closeToTop) {\n\t\t\t\t\tlocation = 'top';\n\t\t\t\t} else if ((tooltipPositionObj.hittingRight || tooltipPositionObj.hittingLeft) && tooltipPositionObj.closeToTop) {\n\t\t\t\t\tlocation = 'bottom';\n\t\t\t\t} else if (tooltipPositionObj.hittingTop && tooltipPositionObj.closeToRight) {\n\t\t\t\t\tlocation = 'left';\n\t\t\t\t} else if (tooltipPositionObj.hittingTop && tooltipPositionObj.closeToLeft) {\n\t\t\t\t\tlocation = 'right';\n\t\t\t\t} else if (!tooltipPositionObj.hittingRight && tooltipPositionObj.closeToRight) {\n\t\t\t\t\tlocation = 'left';\n\t\t\t\t} else if (!tooltipPositionObj.hittingLeft && tooltipPositionObj.closeToLeft) {\n\t\t\t\t\tlocation = 'right';\n\t\t\t\t} else if (tooltipPositionObj.closeToBottom && tooltipPositionObj.closeToTop) {\n\t\t\t\t\tlocation = 'top';\n\t\t\t\t} else if (tooltipPositionObj.closeToTop) {\n\t\t\t\t\tlocation = 'bottom';\n\t\t\t\t}\n\n\t\t\t\treturn location;\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * getTooltipPositionStatus\n\t\t\t */\n\t\t\tfunction getTooltipPositionStatus(containerWidth, containerHeight, point) {\n\t\t\t\tvar rectBBox = _Chart._gBBox;\n\n\t\t\t\tvar offsetY = point.y - _Chart._baseGroupBBox.height;\n\t\t\t\tvar offsetX = point.x - _Chart._baseGroupBBox.width / 2;\n\t\t\t\tvar offsetPadding = _Chart._caretWidth;\n\n\t\t\t\tvar topY = offsetY - offsetPadding;\n\t\t\t\tvar bottomY = point.y + offsetPadding;\n\t\t\t\tvar centerY = point.y - rectBBox.height / 2;\n\t\t\t\tvar leftX = point.x - _Chart._baseGroupBBox.width - _Chart.config('caretSize');\n\t\t\t\tvar rightX = point.x + offsetPadding + 5;\n\n\t\t\t\tvar closeToRight = point.x + _Chart._baseGroupBBox.width / 2 >= containerWidth;\n\t\t\t\tvar closeToLeft = point.x - _Chart._baseGroupBBox.width / 2 <= 0;\n\t\t\t\tvar closeToTop = point.y - _Chart._baseGroupBBox.height - offsetPadding - 3 <= 0;\n\t\t\t\tvar closeToBottom = point.y + _Chart._baseGroupBBox.height > containerHeight;\n\n\t\t\t\tvar hittingRight = closeToRight && point.x - _Chart._baseGroupBBox.width - offsetPadding <= 0;\n\t\t\t\tvar hittingLeft = closeToLeft && point.x + _Chart._baseGroupBBox.width + offsetPadding >= containerWidth;\n\t\t\t\tvar hittingTop = (closeToRight || closeToLeft) && (point.y - (_Chart._baseGroupBBox.height / 2) <= 0);\n\t\t\t\tvar hittingBottom = (closeToRight || closeToLeft) && (point.y + (_Chart._baseGroupBBox.height / 2) >= containerHeight);\n\n\t\t\t\treturn {\n\t\t\t\t\toffsetX: offsetX,\n\t\t\t\t\ttopY: topY,\n\t\t\t\t\tbottomY: bottomY,\n\t\t\t\t\tcenterY: centerY,\n\t\t\t\t\tleftX: leftX,\n\t\t\t\t\trightX: rightX,\n\t\t\t\t\tcloseToRight: closeToRight,\n\t\t\t\t\tcloseToLeft: closeToLeft,\n\t\t\t\t\tcloseToTop: closeToTop,\n\t\t\t\t\tcloseToBottom: closeToBottom,\n\t\t\t\t\thittingRight: hittingRight,\n\t\t\t\t\thittingLeft: hittingLeft,\n\t\t\t\t\thittingTop: hittingTop,\n\t\t\t\t\thittingBottom: hittingBottom\n\t\t\t\t};\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * SetBaseGroupBBoxDimensions\n\t\t\t * @param location position of the tooltip\n\t\t\t */\n\t\t\tfunction setBaseGroupBBoxDimensions(location) {\n\t\t\t\t_Chart._baseGroupBBox.height =\n\t\t\t\t\tlocation === 'top' || location === 'bottom' ?\n\t\t\t\t\t_Chart._gBBox.height + (_Chart.config('padding') * 2) + _Chart.config('caretSize') + 6 :\n\t\t\t\t\t_Chart._gBBox.height + (_Chart.config('padding') * 2) + 6;\n\n\t\t\t\t_Chart._baseGroupBBox.width =\n\t\t\t\t\tlocation === 'top' || location === 'bottom' ?\n\t\t\t\t\t_Chart._gBBox.width + (_Chart.config('padding') * 2) + 6 :\n\t\t\t\t\t_Chart._gBBox.width + (_Chart.config('padding') * 2) + _Chart.config('caretSize') + 6;\n\t\t\t}\n\n\n\n\n\n\t\t\t/*----------------------------------------------------------------------------------\n\t    // Helper Functions\n\t    ----------------------------------------------------------------------------------*/\n\n\t\t\t/**\n\t\t\t * Returns if appends is in text rect text format\n\t\t\t * @param appends\n\t\t\t * @returns {boolean}\n\t\t\t */\n\t\t\tfunction isTextRectText(appends) {\n\t\t\t\tvar returnVal = true;\n\t\t\t\tfor (var i = 0; i < appends.node().childNodes.length; i++) {\n\t\t\t\t\tvar nodeName = appends.node().childNodes[i].nodeName;\n\t\t\t\t\treturnVal = (i % 2 === 0 && nodeName === 'text' ? true : (nodeName === 'rect'));\n\t\t\t\t\tif (!returnVal) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn returnVal;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Formats appends as text rect text\n\t\t\t * @param appends\n\t\t\t * @param groupBBox\n\t\t\t */\n\t\t\tfunction formatAppendTextRectText(appends) {\n\t\t\t\tvar padding = 5;\n\t\t\t\tvar prevWidth = 0;\n\t\t\t\tvar groupBBox = {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0,\n\t\t\t\t\theight: 0,\n\t\t\t\t\twidth: 0\n\t\t\t\t};\n\n\t\t\t\tappends.select('rect').attr('height', 0);\n\t\t\t\tgroupBBox = appends.node().getBBox();\n\n\n\t\t\t\t/*jshint -W083 */\n\t\t\t\tfor (var i = 0; i < appends.node().childNodes.length; i++) {\n\t\t\t\t\tvar element = appends.node().childNodes[i];\n\n\t\t\t\t\tif (i % 2 === 0) {\n\t\t\t\t\t\t//text\n\t\t\t\t\t\tvar t = appends.select('text:nth-child(' + (i + 1) + ')')\n\t\t\t\t\t\t\t.attr({\n\t\t\t\t\t\t\t\tdy: function () {\n\t\t\t\t\t\t\t\t\treturn getCentralPosition(this);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tx: (prevWidth + (padding * i) + 1),\n\t\t\t\t\t\t\t\ty: groupBBox.height / 2\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\tprevWidth += element.getBBox().width;\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//rect\n\t\t\t\t\t\tappends.select('rect:nth-child(' + (i + 1) + ')')\n\t\t\t\t\t\t\t.attr({\n\t\t\t\t\t\t\t\tx: (prevWidth + (padding * i)),\n\t\t\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\t\t\twidth: 1,\n\t\t\t\t\t\t\t\theight: groupBBox.height\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tappends.selectAll('tspan')\n\t\t\t\t\t.attr({\n\t\t\t\t\t\ttransform: function () {\n\t\t\t\t\t\t\treturn 'translate(0, ' + getCentralPosition(this) + ')';\n\t\t\t\t\t\t},\n\t\t\t\t\t\ty: groupBBox.height / 2\n\t\t\t\t\t});\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * setBaseGroupBBox\n\t\t\t */\n\t\t\tfunction setBaseGroupBBox() {\n\t\t\t\t_Chart._baseGroupBBox = cloneBBox(_Chart._baseGroup.node().getBBox());\n\t\t\t\t_Chart._baseGroupBBox.height = _Chart._baseGroupBBox.height - _Chart._caretWidth + 3;\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * Set gBBox's height and width to height, width if defined else\n\t\t\t * it will use appends BBox.\n\t\t\t * @param height\n\t\t\t * @param width\n\t\t\t */\n\t\t\tfunction setGBBox(height, width) {\n\t\t\t\tif (height !== undefined && width !== undefined) {\n\t\t\t\t\t_Chart._gBBox = {\n\t\t\t\t\t\t'height': height,\n\t\t\t\t\t\t'width': width\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\t_Chart._gBBox = _Chart._appends.node().getBBox();\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * Calculates vertical center for text\n\t\t\t * @param elem\n\t\t\t * @returns {number}\n\t\t\t */\n\t\t\tfunction getCentralPosition(elem) {\n\t\t\t\treturn parseInt(d3.select(elem)\n\t\t\t\t\t.style('font-size'), 10) * 0.35;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Returns a tranlate that keeps the path in bounds.\n\t\t\t * @param hittingEdge1\n\t\t\t * @param hittingEdge2\n\t\t\t * @param offset\n\t\t\t * @param dimension\n\t\t\t * @param heightOrWidth\n\t\t\t * @returns {*}\n\t\t\t */\n\t\t\tfunction getPathTranslate(hittingEdge1, hittingEdge2, offset, dimension, heightOrWidth) {\n\t\t\t\tvar translate;\n\n\t\t\t\tif (hittingEdge1) {\n\t\t\t\t\ttranslate = heightOrWidth - _Chart._baseGroupBBox[dimension] + r;\n\t\t\t\t} else if (hittingEdge2) {\n\t\t\t\t\ttranslate = r;\n\t\t\t\t} else {\n\t\t\t\t\ttranslate = offset;\n\t\t\t\t}\n\n\t\t\t\treturn translate;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * UpdateCaretPath\n\t\t\t * @param path\n\t\t\t * @param axis\n\t\t\t * @returns {.autoshot.default_options.options.path|*|.autoshot.default_options.options.local.path|options.path|options.local.path|path}\n\t\t\t */\n\t\t\tfunction updateCaretPath(path, axis) {\n\t\t\t\tvar pathString;\n\t\t\t\tvar xyString;\n\n\t\t\t\tif (axis === 'y') {\n\t\t\t\t\txyString = _Chart[path].caretX + ' ' + (_Chart[path].caretY - _Chart._moveY);\n\t\t\t\t} else {\n\t\t\t\t\txyString = (_Chart[path].caretX + _Chart._moveX) + ' ' + _Chart[path].caretY;\n\t\t\t\t}\n\n\t\t\t\tpathString = _Chart[path].path.match(/Z m (.*?) l/);\n\t\t\t\t_Chart[path].path = _Chart[path].path.replace(pathString[1], xyString);\n\t\t\t\treturn _Chart[path].path;\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * OffsetCaretAtEdge\n\t\t\t * @param config\n\t\t\t */\n\t\t\tfunction offsetCaretAtEdge(config) {\n\t\t\t\tvar container = config.container;\n\t\t\t\tvar point = config.point;\n\t\t\t\tvar tooltipWidth;\n\t\t\t\tvar tooltipHeight;\n\t\t\t\tvar bboxWidth;\n\t\t\t\tvar bboxHeight;\n\t\t\t\tvar mouseXOffset = container.width - point.x;\n\t\t\t\tvar mouseYOffset = point.y;\n\n\t\t\t\tvar curvedRectOffset = 2 * r; //Compensate for the curved rect path. 1 is for good measure.\n\n\t\t\t\tbboxHeight = _Chart._gBBox.height; // - curvedRectOffset;\n\t\t\t\tbboxWidth = _Chart._gBBox.width; //  - curvedRectOffset;\n\n\n\t\t\t\tvar farthestCaretPosition;\n\n\t\t\t\tif (config.left || config.right) {\n\n\t\t\t\t\t//Left\n\t\t\t\t\tif (config.left) {\n\t\t\t\t\t\ttooltipWidth = container.width - (_Chart._baseGroupBBox.width / 2);\n\t\t\t\t\t\t_Chart._moveX = tooltipWidth - mouseXOffset;\n\n\t\t\t\t\t\tif ((bboxWidth / 2) + _Chart.config('caretSize') <= _Chart._moveX) {\n\t\t\t\t\t\t\t_Chart._moveX = -((bboxWidth / 2) + _Chart.config('caretSize'));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t//Right\n\t\t\t\t\tif (config.right) {\n\t\t\t\t\t\ttooltipWidth = _Chart._baseGroupBBox.width / 2;\n\t\t\t\t\t\t_Chart._moveX = tooltipWidth - mouseXOffset;\n\n\t\t\t\t\t\tif (-((bboxWidth / 2) + _Chart.config('caretSize')) >= _Chart._moveX) {\n\t\t\t\t\t\t\t_Chart._moveX = -((bboxWidth / 2) + _Chart.config('caretSize'));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\n\t\t\t\t} else if (config.top || config.bottom) {\n\n\t\t\t\t\t//Top\n\t\t\t\t\tif (config.top) {\n\t\t\t\t\t\ttooltipHeight = _Chart._baseGroupBBox.height / 2;\n\t\t\t\t\t\t_Chart._moveY = tooltipHeight - mouseYOffset;\n\n\t\t\t\t\t\tfarthestCaretPosition = (bboxHeight / 2) + _Chart.config('caretSize') - curvedRectOffset;\n\n\t\t\t\t\t\tif (farthestCaretPosition <= _Chart._moveY) {\n\t\t\t\t\t\t\t_Chart._moveY = farthestCaretPosition;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t//Bottom\n\t\t\t\t\tif (config.bottom) {\n\t\t\t\t\t\ttooltipHeight = container.height - ((_Chart._baseGroupBBox.height) / 2);\n\t\t\t\t\t\t_Chart._moveY = tooltipHeight - mouseYOffset;\n\n\t\t\t\t\t\tfarthestCaretPosition = -(((bboxHeight) / 2) - _Chart.config('caretSize')) - curvedRectOffset;\n\n\t\t\t\t\t\tif (farthestCaretPosition >= _Chart._moveY) {\n\t\t\t\t\t\t\t_Chart._moveY = farthestCaretPosition;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t_Chart._moveX = 0;\n\t\t\t\t\t_Chart._moveY = 0;\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\t/**\n\t\t\t * GeneratePaths\n\t\t\t */\n\t\t\tfunction generatePaths() {\n\t\t\t\tvar w = _Chart._gBBox.width + (_Chart.config('padding') * 2);\n\t\t\t\tvar h = _Chart._gBBox.height + (_Chart.config('padding') * 2);\n\t\t\t\tvar c = _Chart.config('caretSize');\n\t\t\t\tvar y = (h / 2) + _Chart.config('caretSize') + r;\n\n\t\t\t\t_Chart._topPath = {\n\t\t\t\t\ttranslate: 'translate(' + (w / 2) + ',' + (h + c + r) + ')',\n\t\t\t\t\tcaretX: ((w / 2) - c),\n\t\t\t\t\tcaretY: (h + (r * 2))\n\t\t\t\t};\n\t\t\t\t_Chart._topPath.path = 'm -' + (w / 2) + ' -' + (h + c + (r * 2)) +\n\t\t\t\t\t' h ' + w +\n\t\t\t\t\t' c 1.7 0 ' + r + ' 1.3 ' + r + ' ' + r +\n\t\t\t\t\t' v ' + h +\n\t\t\t\t\t' c 0 1.7 -1.3 ' + r + ' -' + r + ' ' + r +\n\t\t\t\t\t' h -' + w +\n\t\t\t\t\t' c -1.7 0 -' + r + ' -1.3 -' + r + ' -' + r +\n\t\t\t\t\t' v -' + h +\n\t\t\t\t\t' c 0 -1.7 1.3 -' + r + ' ' + r + ' -' + r +\n\t\t\t\t\t' Z m ' + _Chart._topPath.caretX + ' ' + _Chart._topPath.caretY +\n\t\t\t\t\t' l ' + c + ' ' + c +\n\t\t\t\t\t' l ' + c + ' -' + c;\n\n\t\t\t\t_Chart._bottomPath = {\n\t\t\t\t\ttranslate: 'translate(' + (w / 2) + ',' + (-c + (r / 2)) + ')',\n\t\t\t\t\tcaretX: ((w / 2) - c),\n\t\t\t\t\tcaretY: 0\n\t\t\t\t};\n\t\t\t\t_Chart._bottomPath.path = 'm -' + (w / 2) + ' ' + 0 +\n\t\t\t\t\t' h ' + w +\n\t\t\t\t\t' c 1.7 0 ' + r + ' 1.3 ' + r + ' ' + r +\n\t\t\t\t\t' v ' + h +\n\t\t\t\t\t' c 0 1.7 -1.3 ' + r + ' -' + r + ' ' + r +\n\t\t\t\t\t' h -' + w +\n\t\t\t\t\t' c -1.7 0 -' + r + ' -1.3 -' + r + ' -' + r +\n\t\t\t\t\t' v -' + h +\n\t\t\t\t\t' c 0 -1.7 1.3 -' + r + ' ' + r + ' -' + r +\n\t\t\t\t\t' Z m ' + _Chart._bottomPath.caretX + ' ' + _Chart._bottomPath.caretY +\n\t\t\t\t\t' l ' + c + ' -' + c +\n\t\t\t\t\t' l ' + c + ' ' + c;\n\n\t\t\t\t_Chart._leftPath = {\n\t\t\t\t\ttranslate: 'translate(' + (w + c + r) + ',' + (h / 2) + ')',\n\t\t\t\t\tcaretX: (w + r),\n\t\t\t\t\tcaretY: y\n\t\t\t\t};\n\t\t\t\t_Chart._leftPath.path = 'm -' + (w + c + r) + ' ' + -((h / 2) + r) +\n\t\t\t\t\t' h ' + w +\n\t\t\t\t\t' c 1.7 0 ' + r + ' 1.3 ' + r + ' ' + r +\n\t\t\t\t\t' v ' + h +\n\t\t\t\t\t' c 0 1.7 -1.3 ' + r + ' -' + r + ' ' + r +\n\t\t\t\t\t' h -' + w +\n\t\t\t\t\t' c -1.7 0 -' + r + ' -1.3 -' + r + ' -' + r +\n\t\t\t\t\t' v -' + h +\n\t\t\t\t\t' c 0 -1.7 1.3 -' + r + ' ' + r + ' -' + r +\n\t\t\t\t\t' Z m ' + _Chart._leftPath.caretX + ' ' + _Chart._leftPath.caretY +\n\t\t\t\t\t' l ' + c + ' -' + c +\n\t\t\t\t\t' l -' + c + ' -' + c;\n\n\t\t\t\t_Chart._rightPath = {\n\t\t\t\t\ttranslate: 'translate(' + -(c + r) + ',' + (h / 2) + ')',\n\t\t\t\t\tcaretX: -r,\n\t\t\t\t\tcaretY: y\n\t\t\t\t};\n\t\t\t\t_Chart._rightPath.path = 'm ' + (c + r) + ' ' + -((h / 2) + r) +\n\t\t\t\t\t' h ' + w +\n\t\t\t\t\t' c 1.7 0 ' + r + ' 1.3 ' + r + ' ' + r +\n\t\t\t\t\t' v ' + h +\n\t\t\t\t\t' c 0 1.7 -1.3 ' + r + ' -' + r + ' ' + r +\n\t\t\t\t\t' h -' + w +\n\t\t\t\t\t' c -1.7 0 -' + r + ' -1.3 -' + r + ' -' + r +\n\t\t\t\t\t' v -' + h +\n\t\t\t\t\t' c 0 -1.7 1.3 -' + r + ' ' + r + ' -' + r +\n\t\t\t\t\t' Z m ' + _Chart._rightPath.caretX + ' ' + _Chart._rightPath.caretY +\n\t\t\t\t\t' l -' + c + ' -' + c +\n\t\t\t\t\t' l ' + c + ' -' + c + ' Z';\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * cloneBBox, IE will not let you modify the obj returned from getBBox\n\t\t\t * @param box\n\t\t\t * @returns {{x: *, y: *, width: *, height: *}}\n\t\t\t */\n\t\t\tfunction cloneBBox(box) {\n\t\t\t\treturn {\n\t\t\t\t\tx: box.x,\n\t\t\t\t\ty: box.y,\n\t\t\t\t\twidth: box.width,\n\t\t\t\t\theight: box.height\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tpreDraw() {\n\t\t\tthis._container = this.config('container');\n\t\t}\n\t}\n\n\tvar _Tooltip = Tooltip;\n\n\t/**\n\t * This will convert a flat, 2D array into a nested data structure.\n\t * Simular to d3.nest but allows n number of depths for each node\n\t */\n\n\t// jscs:disable\n\tfunction hierarchy () {\n\t  var nest = {},\n\t      keys = [],\n\t      sortKeys = [],\n\t      maxLength = 0,\n\t      sortValues,\n\t      rollup,\n\t      filter = function (d) {\n\t        return d !== null;\n\t      };\n\n\t function keySetter (depth) {\n\t    return function (d) {\n\t      return d[depth];\n\t    };\n\t  }\n\n\t  function map(mapType, array, depth) {\n\t    if (depth >= maxLength) {\n\t      return rollup\n\t        ? rollup.call(nest, array) : (sortValues\n\t        ? array.sort(sortValues)\n\t        : array);\n\t    }\n\n\t    var i = -1,\n\t        n = array.length,\n\t        key = keySetter(depth++),\n\t        keyValue,\n\t        object,\n\t        setter,\n\t        size,\n\t        valuesByKey = d3.map({}),\n\t        values;\n\n\t    /*jshint -W084 */\n\t    while (++i < n) {\n\t      if (depth === 1) {\n\t        object = array[i].filter(filter);\n\t      } else {\n\t        object = array[i];\n\t      }\n\t      values = valuesByKey.get(keyValue = key(object));\n\t      if (array[i].length > depth) {\n\t        if (values) {\n\t          values.push(object);\n\t        } else {\n\t          valuesByKey.set(keyValue, [object]);\n\t        }\n\t      }\n\t    }\n\n\t    if (mapType) {\n\t      object = mapType();\n\t      size = function (object) {\n\t        return object.size();\n\t      };\n\t      setter = function(keyValue, values) {\n\t        object.set(keyValue, map(mapType, values, depth));\n\t      };\n\t    } else {\n\t      object = {};\n\t      size = function (object) {\n\t        return Object.keys(object).length;\n\t      };\n\t      setter = function(keyValue, values) {\n\t        object[keyValue] = map(mapType, values, depth);\n\t      };\n\t    }\n\n\t    valuesByKey.forEach(setter);\n\t    if (!size(object)) {\n\t      return array;\n\t    }\n\t    return object;\n\t  }\n\n\t  function entries(map, depth) {\n\t    if (depth >= maxLength || depth > map.length - 1) {\n\t      return map;\n\t    }\n\n\t    var array = [],\n\t        sortKey = sortKeys[depth++];\n\n\t    map.forEach(function(key, keyMap) {\n\t      array.push({name: key, children: entries(keyMap, depth)});\n\t    });\n\n\t    return sortKey\n\t      ? array.sort(function(a, b) { return sortKey(a.name, b.name); })\n\t      : array;\n\t  }\n\n\t  nest.map = function(array, mapType) {\n\t    return map(mapType, array, 0);\n\t  };\n\n\t  nest.entries = function(array) {\n\t    return entries(map(d3.map, array, 0), 0);\n\t  };\n\n\t  nest.maxLength = function(newMaxLength) {\n\t    maxLength = newMaxLength - 2;\n\t    return nest;\n\t  };\n\n\t  nest.filter = function (f) {\n\t    filter = f;\n\t    return nest;\n\t  };\n\n\t  // Specifies the order for the most-recently specified key.\n\t  // Note: only applies to entries. Map keys are unordered!\n\t  nest.sortKeys = function(order, depth) {\n\t    depth = depth || maxLength;\n\t    sortKeys[depth] = order;\n\t    return nest;\n\t  };\n\n\t  // Specifies the order for leaf values.\n\t  // Applies to both maps and entries array.\n\t  nest.sortValues = function(order) {\n\t    sortValues = order;\n\t    return nest;\n\t  };\n\n\t  nest.rollup = function(f) {\n\t    rollup = f;\n\t    return nest;\n\t  };\n\n\t  return nest;\n\t}\n\t// jscs:enable\n\n\tvar _hierarchy = hierarchy;\n\n\tclass Icicle extends koto.Base {\n\t\tconstructor(selection) {\n\t    super(selection);\n\t    var _Chart = this;\n\n\t    [{\n\t      name: 'height',\n\t      description: 'The height of the chart.',\n\t      value: 700,\n\t      type: 'number',\n\t      units: 'px',\n\t      category: 'Size',\n\t      getter: function (){\n\t        // get value\n\t        console.log('getter');\n\t        return this.value;\n\t      },\n\t      setter: function (newValue){\n\t        // Set something\n\t        console.log('setter');\n\t        return newValue;\n\t      }\n\t    }, {\n\t      name: 'width',\n\t      description: 'The widthj of the chart.',\n\t      value: 900,\n\t      units: 'px',\n\t      type: 'number',\n\t      category: 'Size'\n\t    }, {\n\t      name: 'transitionDuration',\n\t      description: 'How long should it take to animate on click.',\n\t      value: 750,\n\t      units: 'ms',\n\t      type: 'number',\n\t      category: 'Animation'\n\t    }, {\n\t      name: 'introDuration',\n\t      description: 'How long should it take to animate in.',\n\t      value: 2000,\n\t      units: 'ms',\n\t      type: 'number',\n\t      category: 'Animation'\n\t    }, {\n\t      name: 'colorRange',\n\t      value: ['#BBE491', '#FB8D34', '#E45621', '#73B0D7'],\n\t      description: 'colors for categories',\n\t      type: 'colorArray',\n\t      category: 'Color'\n\t    }].forEach(function (item) {\n\t      _Chart.configs.set(item.name, item);\n\t    });\n\n\t    // accessors\n\t    this.accessor('name', function (d) { return d[d.length-2]; });\n\n\t    // formatters\n\t    var percent = d3.format('%');\n\t    var overUnder = d3.format('+%');\n\n\t    // scales\n\t    this.x = d3.scale.linear();\n\t    this.y = d3.scale.linear();\n\t    this.color = d3.scale.ordinal();\n\n\t    // layouts\n\t    this.partition = d3.layout.partition()\n\t      .value(function(d) { return d[d.length - 1]; });\n\n\t    // setup main group\n\t    this._group = this.base.append('g');\n\t    \n\t    // Set up tool tip;\n\t    this._tooltip = new _Tooltip(this.base.append('g'));\n\n\t    this._tooltip.config({\n\t      opacity: 1,\n\t      format: 'textRectText'\n\t    });\n\n\t    this._tooltipValue = this._tooltip._appends.append('text')\n\t      .style('font-family', 'Open Sans');\n\t    this._tooltipRect = this._tooltip._appends.append('rect');\n\t    this._tooltipLabel = this._tooltip._appends.append('text')\n\t      .style('font-family', 'Open Sans');\n\t    \n\t    this._tooltip.trigger('draw');\n\t    this._tooltip.trigger('remove');\n\t    \n\t    // Setup Layers\n\t    var icicle = this.layer('icicle', this._group, {\n\t      dataBind: function (data) {\n\t        var root = _Chart.partition(data[0]);\n\t        if (_Chart._targetData) {\n\t          var target = _Chart.partition(_Chart._targetData[0]);\n\t          for (var i=0; i < root.length; i++) {\n\t            root[i].target = target[i].value;\n\t          }\n\t        }\n\t        return this.selectAll('g').data(root);\n\t      },\n\t      insert: function () {\n\t        return this.append('g')\n\t          .on('click', click)\n\t          .on('mouseover', function (d) {\n\t            _Chart._group.selectAll('rect')\n\t              .filter(function (datum) {\n\t                var thingName = d.name ? d.name : d[d.length - 2];\n\t                return !isRelated(d, datum);\n\t              })\n\t              .style('fill', '#e3e3e3');\n\n\t              _Chart._tooltipValue\n\t                .text(d.name ? d.name : _Chart.accessor('name')(d));\n\n\t              _Chart._tooltipRect.style('fill', '#000');\n\n\t              _Chart._tooltipLabel\n\t                .text(percent(d.value));\n\n\t              if (_Chart._targetData) {\n\t                _Chart._tooltipRect2.style('fill', '#000');\n\t                _Chart._tooltipLabel2\n\t                  .text(overUnder(d.value - d.target));\n\t              }\n\n\t              _Chart._tooltip.trigger('draw');\n\t            })\n\t            .on('mousemove', function () {\n\t              var coordinates = d3.mouse(_Chart.base.node());\n\t              _Chart._tooltip.trigger('moveTo', {x: coordinates[0], y: coordinates[1]}, null, _Chart.config('width'), _Chart.config('height'));\n\t            })\n\t            .on('mouseout', function (d) {\n\t              _Chart._group.selectAll('rect')\n\t                .style('fill', function(d) { return _Chart.color(d.base); });\n\n\t              _Chart._tooltip.trigger('remove');\n\t            });\n\t      }\n\t    });\n\t  \n\t    // layer life-cycle events\n\t    icicle.on('enter', function () {\n\t      this.append('rect')\n\t        .style('stroke', '#fff');\n\t      \n\t      if (_Chart._targetData) {\n\t        this.append('path');\n\t      }\n\n\t      this.append('text')\n\t        .style('pointer-events', 'none');\n\n\t      return this;\n\t    })\n\t    .on('merge', function () {\n\t      // boxes\n\t      this.select('rect')\n\t        .attr('x', function(d) { return _Chart.x(d.x); })\n\t        .attr('y', function(d) { return _Chart.y(d.y); })\n\t        .attr('width', function(d) { return _Chart.x(d.dx); })\n\t        .attr('height', 0)\n\t        .style('fill', function(d) { d.base = getParent(d, _Chart.rootName); return _Chart.color(d.base); });\n\n\t      // over-under indicator\n\t      if (_Chart._targetData) {\n\t        this.select('path')\n\t          .style('fill', '#555')\n\t          .style('opacity', 0)\n\t          .attr({\n\t            d: function (d) {\n\t              var symbol = d3.svg.symbol();\n\t              var gen = d.value > d.target ? symbol.type('triangle-up') : d.value < d.target ? symbol.type('triangle-down') : symbol.type('triangle-down');\n\t              return gen();\n\t            },\n\t            transform: function (d) {\n\t              var left = _Chart.x(d.x) + 15;\n\t              var top = _Chart.y(d.y) + 15;\n\t              \n\t              return `translate(${left},${top})`;\n\t            }\n\t          });\n\t      }\n\n\t      // labels\n\t      this.select('text')\n\t        .text(function (d) { return d.name ? d.name : d[d.length - 2]; })\n\t        .attr('x', function(d) { return _Chart.x(d.x); })\n\t        .attr('dx', _Chart._targetData ? 25 : 5)\n\t        .attr('y', function(d) { return _Chart.y(d.y); })\n\t        .attr('dy', 16)\n\t        .style('alignment-baseline', 'middle')\n\t        .style('fill', '#555')\n\t        .style('font-family', 'Open Sans')\n\t        .style('opacity', 0);\n\t    })\n\t    .on('merge:transition', function () {\n\t      var totalDuration = _Chart.config('introDuration');\n\t      var duration = totalDuration/(_Chart.max-1);\n\t      \n\t      // rects\n\t      this\n\t        .duration(duration)\n\t        .ease('linear')\n\t        .delay(function (d) { return d.depth * duration; })\n\t        .select('rect')\n\t        .attr('height', function(d) { return _Chart.y(d.dy); });\n\t      \n\t      // paths\n\t      if (_Chart._targetData) {\n\t        this\n\t          .delay(totalDuration)\n\t          .selectAll('path')\n\t          .style('opacity', function (d) {\n\t            var shouldShow = d.value > d.target || d.value < d.target;\n\t            var canFit = _Chart.x(d.dx) > 25;\n\t            return shouldShow && canFit ? 1 : 0;\n\t          });\n\t      }\n\n\t      // linear\n\t      this\n\t        .duration(duration)\n\t        .ease('linear')\n\t        .delay(function (d) { return d.depth * duration; })\n\t        .select('text')\n\t        .style('opacity', function (d) {\n\t          d.textLength = this.getComputedTextLength();\n\t          return (d.textLength + 30) < _Chart.x(d.dx) ? 1 : 0;\n\t        });\n\t      return this;\n\t    });\n\n\t    // click event handler\n\t    function click(d) {\n\t      _Chart.x.domain([d.x, d.x + d.dx]);\n\t      _Chart.y.domain([d.y, 1]).range([d.y ? 20 : 0, _Chart.config('height')]);\n\n\t      // transition Rects\n\t      _Chart._group.selectAll('rect')\n\t        .transition()\n\t        .duration(_Chart.config('transitionDuration'))\n\t        .attr('x', function(d) { return _Chart.x(d.x); })\n\t        .attr('y', function(d) { return _Chart.y(d.y); })\n\t        .attr('width', function(d) { return _Chart.x(d.x + d.dx) - _Chart.x(d.x); })\n\t        .attr('height', function(d) { return _Chart.y(d.y + d.dy) - _Chart.y(d.y); });\n\n\t      // transition paths\n\t      if (_Chart._targetData) {\n\t        _Chart._group.selectAll('path')\n\t          .transition()\n\t          .duration(_Chart.config('transitionDuration'))\n\t          .attr('transform', function (d) {\n\t            var left = _Chart.x(d.x) + 15;\n\t            var top = _Chart.y(d.y) + 15;\n\t            return `translate(${left},${top})`;\n\t          });\n\t      }\n\n\t      // transition text\n\t      _Chart._group.selectAll('text')\n\t        .transition()\n\t        .duration(_Chart.config('transitionDuration'))\n\t        .attr('x', function(d) { return _Chart.x(d.x); })\n\t        .attr('y', function(d) { return _Chart.y(d.y); })\n\t        .style('opacity', function (d) {\n\t          return (d.textLength + 12) < (_Chart.x(d.x + d.dx) - _Chart.x(d.x)) ? 1 : 0;\n\t        });\n\t    }\n\n\t    // check to see if nodes are related\n\t    function isRelated(thing, relative) {\n\t      return (isChild(thing, relative) || isParent(thing, relative));\n\t    }\n\n\t    // check to see if node is child\n\t    function isChild(thing, relative) {\n\t      if (thing === relative) {\n\t        return true;\n\t      }\n\t      if (!thing.parent) {\n\t        return false;\n\t      }\n\t      return isChild(thing.parent, relative);\n\t    }\n\n\t    // check to see if node is parent\n\t    function isParent (thing, relative) {\n\t      var i;\n\t      var temp;\n\t      if (thing === relative) {\n\t        return true;\n\t      }\n\t      if (!thing.children) {\n\t        return false;\n\t      }\n\t      for (i=0; i < thing.children.length; i++) {\n\t        if (isParent(thing.children[i], relative)) {\n\t          return true;\n\t        }\n\t      }\n\t      return false;\n\t    }\n\n\t    // get parents name - for color\n\t    function getParent (d, rootName) {\n\t      if (!d.parent) {\n\t        return d.name;\n\t      }\n\t      if (d.parent.name === rootName) {\n\t        return d.name;\n\t      }\n\t      return getParent(d.parent, rootName);\n\t    }\n\t  }\n\n\t  transform(data){\n\t    this.max = d3.max(data, function (row) { return row.length; });\n\t    return _hierarchy()\n\t      .maxLength(this.max)\n\t      .entries(data);\n\t  }\n\n\t  targetData(data){\n\t    this._targetData = _hierarchy()\n\t      .maxLength(this.max)\n\t      .entries(data);\n\n\t    this._tooltipRect2 = this._tooltip._appends.append('rect');\n\t    this._tooltipLabel2 = this._tooltip._appends.append('text')\n\t      .style('font-family', 'Open Sans');\n\t    return this;\n\t  }\n\n\t  preDraw(data){\n\t    this.x.range([0, this.config('width')]);\n\t    this.y.range([0, this.config('height')]);\n\t    this.rootName = data[0].name;\n\t    \n\t    var level1 = data[0].children.map(function (child) { return child.name; });\n\t    level1.push(this.rootName);\n\t    this.color.range(this.config('colorRange')).domain(level1);\n\t  }\n\t}\n\n\tkoto.Icicle = Icicle;\n\n\tvar chart = koto.Icicle;\n\n\treturn chart;\n\n}));\n"]}